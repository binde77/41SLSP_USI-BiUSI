!function o(s,l,a){function u(t,e){if(!l[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=l[t]={exports:{}};s[t][0].call(r.exports,function(e){return u(s[t][1][e]||e)},r,r.exports,o,s,l,a)}return l[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){"use strict";var i=e("./modules/prm-location-items-after/usi-location-items-after.module"),r=e("./modules/prm-location-holdings-after/usi-location-holdings-after.module"),o=e("./modules/prm-location-item-after/usi-location-item-after.module"),s=e("./modules/prm-personal-info-after/usi-personal-info-after.module"),l=e("./modules/prm-user-area-expandable-after/usi-user-area-expandable-after.module"),a=e("./modules/prm-request-after/usi-request-after.module"),u=e("./modules/alma-howovp-after/alma-how-after.module"),c=e("./modules/slsp-http-intercept-requests/slsp-http-intercept-requests.module"),d=angular.module("viewCustom",["angularLoad"]);d.requires.push(i.usiLocationItemsAfterModule.name),d.requires.push(r.usiLocationHoldingsAfterModule.name),d.requires.push(o.usiLocationItemAfterModule.name),d.requires.push(s.usiPersonalInfoAfterModule.name),d.requires.push(l.usiUserAreaExpandableAfterModule.name),d.requires.push(a.usiRequestAfterModule.name),d.requires.push(u.usiAlmaHowovpAfterModule.name),d.requires.push(c.slspHttpInterceptRequests.name)},{"./modules/alma-howovp-after/alma-how-after.module":2,"./modules/prm-location-holdings-after/usi-location-holdings-after.module":6,"./modules/prm-location-item-after/usi-location-item-after.module":13,"./modules/prm-location-items-after/usi-location-items-after.module":17,"./modules/prm-personal-info-after/usi-personal-info-after.module":20,"./modules/prm-request-after/usi-request-after.module":24,"./modules/prm-user-area-expandable-after/usi-user-area-expandable-after.module":30,"./modules/slsp-http-intercept-requests/slsp-http-intercept-requests.module":31}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiAlmaHowovpAfterModule=void 0;var i=e("./usi-howovp/usi-howovp.module");(n.usiAlmaHowovpAfterModule=angular.module("usiAlmaHowovpAfterModule",[]).component("almaHowovpAfter",{bindings:{parentCtrl:"<"},template:'<usi-howovp-component after-ctrl="$ctrl"></usi-howovp-component>'})).requires.push(i.usiHowovpModule.name)},{"./usi-howovp/usi-howovp.module":5}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.usiHowovpConfig=function(){return{title:{de:"Andere Ausleih- und Bestelloptionen",en:"Other loan and request options",fr:"Autres options de prêt et de demande",it:"Altre opzioni di prestito e richiesta"},ill:{de:"Fernleihe",en:"Inter Library Loan (ILL)",fr:"Prêt entre bibliothèques",it:"Prestito interbibliotecario"},msg:{de:'Achtung: diese Option nur wählen, wenn kein Exemplar unter "" verfügbar ist!',en:'Attention: use this method only in case no item is available under ""',fr:"Attention: n'utilisez cette option que dans le cas où aucun exemplaire n'est disponible sous \"\"!",it:'Attenzione: utilizzate questo metodo solo se non sono disponibili opzioni in ""!'}}}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.usiConfigService=e,this.usiHowovpConfig=t}(n.usiHowovpController=(i(o,[{key:"$doCheck",value:function(){var e,t,n,i,r=angular.element(document.querySelector("alma-howovp md-list-item span[translate]"));console.log(r),r.length&&(e=document.createElement("div"),t=this.usiConfigService.getLabel(this.usiHowovpConfig,"ill"),e.innerHTML=this.usiConfigService.getLabel(this.usiHowovpConfig,"msg").replace('""','<strong>"'+this.usiConfigService.getLabel(this.usiHowovpConfig,"title")+'"</strong>'),r[0].replaceWith(e),n=angular.element(document.querySelector("alma-howovp")),(i=document.createElement("h3")).className="medium-uppercase-bold ill",i.innerHTML="<br><span>"+t+"</span>",n[0].insertBefore(i,n[0].children[0]))}}]),o)).$inject=["usiConfigService","usiHowovpConfig"]},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiHowovpModule=void 0;var i=e("../../../services/usi-config.service"),r=e("./usi-howovp.controller"),o=e("./usi-howovp.config");n.usiHowovpModule=angular.module("usiHowovpModule",[]).factory("usiConfigService",i.usiConfigService).factory("usiHowovpConfig",o.usiHowovpConfig).controller("usiHowovpController",r.usiHowovpController).component("usiHowovpComponent",{bindings:{afterCtrl:"<"},controller:"usiHowovpController"})},{"../../../services/usi-config.service":32,"./usi-howovp.config":3,"./usi-howovp.controller":4}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiLocationHoldingsAfterModule=void 0;var i=e("./usi-location-open-close/usi-location-open-close.module");(n.usiLocationHoldingsAfterModule=angular.module("usiLocationHoldingsAfterModule",[]).component("prmLocationHoldingsAfter",{bindings:{parentCtrl:"<"},template:'<usi-location-open-close-component after-ctrl="$ctrl"></usi-location-open-close-component>'})).requires.push(i.usiLocationOpenCloseModule.name)},{"./usi-location-open-close/usi-location-open-close.module":9}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.usiLocationOpenCloseConfig=function(){return{open:{de:"Frei zugänglich",en:"Open stacks",fr:"Libre accès",it:"A libero accesso"},closed:{de:"Geschlossener Standort",en:"Closed stacks",fr:"Rayon non accessible",it:"A scaffale chiuso"}}}},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),console.log("***USI*** usiLocationOpenCloseController.constructor\n\n"),this.usiConfigService=e,this.config=t,this.usilocation={}}(n.usiLocationOpenCloseController=(i(o,[{key:"$onInit",value:function(){if(void 0!==this.afterCtrl.parentCtrl.currLoc)try{console.log("***USI*** usiLocationOpenCloseController.$onInit\n\n");this.usilocation.isopen=!!["201","202","208","801","803","804","805","808","810","819","823","827","831","832","833","834","841","842","843","844"].includes(this.afterCtrl.parentCtrl.currLoc.location.subLocationCode),this.usilocation.isusi="41SLSP_USI"==this.afterCtrl.parentCtrl.currLoc.location.organization}catch(e){throw console.error("***USI*** an error occured: usiLocationOpenCloseController.$onInit\n\n"),console.error(e.message),e}}}]),o)).$inject=["usiConfigService","usiLocationOpenCloseConfig","$element"]},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiLocationOpenCloseModule=void 0;var i=e("../../../services/usi-config.service"),r=e("./usi-location-open-close.config"),o=e("./usi-location-open-close.controller");n.usiLocationOpenCloseModule=angular.module("usiLocationOpenCloseModule",[]).factory("usiConfigService",i.usiConfigService).factory("usiLocationOpenCloseConfig",r.usiLocationOpenCloseConfig).controller("usiLocationOpenCloseController",o.usiLocationOpenCloseController).component("usiLocationOpenCloseComponent",{controller:"usiLocationOpenCloseController",bindings:{afterCtrl:"<"},template:'<div class="open-closed-container" ng-if="$ctrl.usilocation.isopen && $ctrl.usilocation.isusi">\n\t<div class="open-closed-img">\n\t\t<img src="/discovery/custom/41SLSP_USI-BiUSI/img/open_shelf_traced_icon.png" alt="">\n\t</div>\n\t<div class="open-closed-txt">\n\t\t<span style="padding: 0.1em 0px 0px; font-size: 1em; color: green; display: flex; max-width: 200px;">\n\t\t\t{{::$ctrl.usiConfigService.getLabel($ctrl.config, \'open\')}}\n\t\t</span>\n\t</div>\n</div>\n<div class="open-closed-container" ng-if="!$ctrl.usilocation.isopen && $ctrl.usilocation.isusi">\n\t<div class="open-closed-img">\n\t\t<img src="/discovery/custom/41SLSP_USI-BiUSI/img/closed_shelf_traced_icon.png" alt="">\n\t</div>\n\t<div class="open-closed-txt">\n\t\t<span style="padding: 0.1em 0px 0px; font-size: 1em; color: red; display: flex; max-width: 200px;">\n\t\t\t{{::$ctrl.usiConfigService.getLabel($ctrl.config, \'closed\')}}\n\t\t</span>\n\t</div>\n</div>'})},{"../../../services/usi-config.service":32,"./usi-location-open-close.config":7,"./usi-location-open-close.controller":8}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.usiItemRedTextConfig=function(){return{labisalp:{de:"Benutzung nach Vereinbarung bei LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, Mo-Fr 9-17 Uhr",en:"Consultation by appointment at LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, Mo-Fr 9am-5pm",fr:"Consultation sur rendez-vous chez LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, lun-ven 9h-17h",it:"Consultabile su appuntamento c/o LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, Lu-Ve 09:00-17:00"},cattedre:{de:"Wenden Sie sich an die jeweilige Abteilung (für Details klicken)",en:"Address yourself to the specific department (click for details)",fr:"Adressez-vous au département spécifique (cliquez pour plus de détails)",it:"Rivolgersi alla cattedra specifica (cliccare per vedere i dettagli)"},btm:{de:"Zugang nach Vereinbarung, siehe",en:"Consultation on appointment, see",fr:"Consultation sur rendez-vous, voir ",it:"Consultazione su appuntamento, vedi"},sequential:{de:"Achtung: dieses Buch ist in Zahlenreihenfolge auf dem Regal geordnet (siehe Nummer links)",en:"Attention: this book is ordered in numerical sequence on the shelf (see number on the left) ",fr:"Attention : les livres de cette collection sont triés selon l’ordre numérique (voir numéro à gauche)",it:"Attenzione: i libri di questo fondo sono ordinati a scaffale secondo la sequenza numerica (v. numero a sinistra)"},sameday:{de:"Benutzung nur in der Bibliothek",en:"In-library consultation only",fr:"Consultation uniquement en bibliothèque",it:"Consultazione solo in biblioteca"},seven:{de:"Leihfrist 7 Tage",en:"7 days loan",fr:"Prêt 7 jours",it:"Prestito 7 giorni"},twentyeight:{de:"Leihfrist 28 Tage",en:"28 days loan",fr:"Prêt 28 jours",it:"Prestito 28 giorni"}}}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),console.log("***USI*** usiItemRedTextController.constructor\n\n"),this.usiConfigService=e,this.config=t,this.element=n[0]}(n.usiItemRedTextController=(i(o,[{key:"$doCheck",value:function(){var e,t,n=this.element.parentElement.parentElement.children[0].children[0].children[0].children[1];void 0!==n?("Same Day Loan"==n.innerText&&(n.innerText=this.usiConfigService.getLabel(this.config,"sameday"),n.style.color="red"),"28 Days Loan"==n.innerText&&(n.innerText=this.usiConfigService.getLabel(this.config,"twentyeight")),"7 Days Loan"==n.innerText&&(n.innerText=this.usiConfigService.getLabel(this.config,"seven")),n.style["font-size"]="14px"):((e=this.afterCtrl.parentCtrl.loc.location.callNumber).startsWith("BUL B")||e.startsWith("BUL C")||e.startsWith("BUL D")||e.startsWith("BUL F")||e.startsWith("BUL N")||e.startsWith("BUL T"))&&((t=document.createElement("div")).innerText=this.usiConfigService.getLabel(this.config,"sameday"),t.style.color="red",console.log(this.element.parentElement.parentElement.children[0].children[0].children[0]),this.element.parentElement.parentElement.children[0].children[0].children[0].append(t))}},{key:"getText",value:function(){this.holdinglocation={message:!1,btm:!1,text:"",contactlink:""};try{switch(this.afterCtrl.parentCtrl.loc.location.subLocationCode){case"820":this.holdinglocation.message=!0,this.holdinglocation.text=this.usiConfigService.getLabel(this.config,"labisalp");break;case"845":this.holdinglocation.message=!0,this.holdinglocation.text=this.usiConfigService.getLabel(this.config,"cattedre");break;case"809":this.holdinglocation.message=!0,this.holdinglocation.btm=!0,this.holdinglocation.text=this.usiConfigService.getLabel(this.config,"btm"),this.holdinglocation.contactlink="it"==this.usiConfigService.getLanguage()?"http://www.arc.usi.ch/it/btm":"https://www.arc.usi.ch/en/risorse-e-servizi/servizi/biblioteca-tecnica-e-dei-materiali";break;case"810":this.holdinglocation.message=!0,this.holdinglocation.text=this.usiConfigService.getLabel(this.config,"sequential");break;default:this.holdinglocation="normal"}return this.holdinglocation}catch(e){throw console.error("***USI*** an error occured: usiItemRedTextController.$onInit\n\n"),console.error(e.message),e}}}]),o)).$inject=["usiConfigService","usiItemRedTextConfig","$element"]},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiItemRedTextModule=void 0;var i=e("../../../services/usi-config.service"),r=e("./usi-item-red-text.config"),o=e("./usi-item-red-text.controller");n.usiItemRedTextModule=angular.module("usiItemRedTextModule",[]).factory("usiConfigService",i.usiConfigService).factory("usiItemRedTextConfig",r.usiItemRedTextConfig).controller("usiItemRedTextController",o.usiItemRedTextController).component("usiItemRedTextComponent",{bindings:{afterCtrl:"<"},controller:"usiItemRedTextController",template:'<span ng-if="$ctrl.getText().message && !$ctrl.getText().btm" class="item-red-message-nolink">\n\t<span>{{ $ctrl.getText().text }}</span>\n</span>\n<span ng-if="$ctrl.getText().message && $ctrl.getText().btm" class="item-red-message-link">\n\t<span>{{ $ctrl.getText().text }} <a href="{{$ctrl.getText().contactlink}}" target="_blank">{{$ctrl.getText().contactlink.substring(7)}}</a></span>\n</span>'})},{"../../../services/usi-config.service":32,"./usi-item-red-text.config":10,"./usi-item-red-text.controller":11}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiLocationItemAfterModule=void 0;var i=e("./usi-item-red-text/usi-item-red-text.module");(n.usiLocationItemAfterModule=angular.module("usiLocationItemAfterModule",[]).component("prmLocationItemAfter",{bindings:{parentCtrl:"<"},template:'<usi-item-red-text-component after-ctrl="$ctrl"></usi-item-red-text-component>'})).requires.push(i.usiItemRedTextModule.name)},{"./usi-item-red-text/usi-item-red-text.module":12}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.usiLinksConfig=function(){return{mendrisio:{de:"http://biblio.arc.usi.ch/en",en:"http://biblio.arc.usi.ch/en",fr:"http://biblio.arc.usi.ch/en",it:"http://biblio.arc.usi.ch"},lugano:{de:"https://en.bul.sbu.usi.ch",en:"https://en.bul.sbu.usi.ch",fr:"https://en.bul.sbu.usi.ch",it:"https://it.bul.sbu.usi.ch"}}}},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.usiConfigService=e,this.usiLinksConfig=t}(n.usiLinksController=(i(o,[{key:"$onInit",value:function(){try{console.log("***USI*** usiLinksController.$onInit\n\n")}catch(e){throw console.error("***USI*** an error occured: usiLinksController.$onInit\n\n"),console.error(e.message),e}}},{key:"getLibrary",value:function(){if(void 0!==this.afterCtrl.parentCtrl.currLoc)return this.afterCtrl.parentCtrl.currLoc.location.librarycodeTranslation}},{key:"getLink",value:function(){if(void 0!==this.afterCtrl.parentCtrl.loc||void 0!==this.afterCtrl.parentCtrl.currLoc)return"MEAA"==this.afterCtrl.parentCtrl.loc.location.libraryCode||"MEAA"==this.afterCtrl.parentCtrl.currLoc.location.libraryCode?this.usiConfigService.getLabel(this.usiLinksConfig,"mendrisio"):"LUBUL"==this.afterCtrl.parentCtrl.loc.location.libraryCode||"LUBUL"==this.afterCtrl.parentCtrl.currLoc.location.libraryCode?this.usiConfigService.getLabel(this.usiLinksConfig,"lugano"):"https://registration.slsp.ch/libraries/?library="+this.afterCtrl.parentCtrl.loc.location.libraryCode}},{key:"getStyle",value:function(){return""}},{key:"getMEAAclosureMessage",value:function(){var e=(new Date).getTime(),t=new Date(2021,6,21).getTime(),n=new Date(2021,7,8).getTime();return t<=e&&e<=n&&("it"!==this.afterCtrl.parentCtrl.userSessionManagerService.attributesMap.interfaceLanguage?"Attention: services suspended due to summer closure from 26 July to 8 August":"Attenzione: servizi sospesi per chiusura estiva dal 26 luglio all’8 agosto")}}]),o)).$inject=["usiConfigService","usiLinksConfig"]},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiLinksModule=void 0;var i=e("../../../services/usi-config.service"),r=e("./usi-links.controller"),o=e("./usi-links.config");n.usiLinksModule=angular.module("usiLinksModule",[]).factory("usiConfigService",i.usiConfigService).factory("usiLinksConfig",o.usiLinksConfig).controller("usiLinksController",r.usiLinksController).component("usiLinksComponent",{bindings:{afterCtrl:"<"},controller:"usiLinksController",template:'\x3c!-- With closure message --\x3e\n<div ng-if="$ctrl.MEAAclosureMessage()" layout="row" class="LibInfo" layout-align="start center">\n    <span class="md-subhead">\n        <a ng-href="{{ $ctrl.getLink() }}" style="{{ $ctrl.getStyle() }}" target="_blank">\n            <img width="35px" ng-src="/discovery/custom/41SLSP_USI-BiUSI/img/information.png" />\n            {{ $ctrl.getLibrary() }}\n        </a> - <span style="color: red;font-size: 15px;">{{ $ctrl.MEAAclosureMessage() }}</span>\n    </span>\n</div>\n\x3c!-- Without closure message --\x3e\n<div ng-if="!$ctrl.MEAAclosureMessage()" layout="row" class="LibInfo" layout-align="start center">\n    <span class="md-subhead">\n        <a ng-href="{{ $ctrl.getLink() }}" style="{{ $ctrl.getStyle() }}" target="_blank">\n            <img width="35px" ng-src="/discovery/custom/41SLSP_USI-BiUSI/img/information.png" />\n            {{ $ctrl.getLibrary() }}\n        </a>\n    </span>\n</div>'})},{"../../../services/usi-config.service":32,"./usi-links.config":14,"./usi-links.controller":15}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiLocationItemsAfterModule=void 0;var i=e("./usi-links/usi-links.module");(n.usiLocationItemsAfterModule=angular.module("usiLocationItemsAfterModule",[]).component("prmLocationItemsAfter",{bindings:{parentCtrl:"<"},template:'<usi-links-component after-ctrl="$ctrl"></usi-links-component>'})).requires.push(i.usiLinksModule.name)},{"./usi-links/usi-links.module":16}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t="en",n=e.$root.$$childHead.$ctrl.userSessionManagerService;n&&(t=n.getInterfaceLanguage()),this.detailsBaseEdu="https://eduid.ch/web/change-account-data/2/?lang="+t,this.detailsBaseReg="https://registration.slsp.ch/library-card/?lang="+t,this.exclude=["STAFF","11","12","13","14","15","16","91","92","99"],this.grpA=["11","91","92"],this.grpB=["12","13","14","15","16"]}(n.usiEditPersonalDetailsController=(i(o,[{key:"getPatronGrp",value:function(){if(void 0===this.afterCtrl.parentCtrl.personalInfoService.personalInfo)return!1;var e=this.afterCtrl.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;return!this.exclude.includes(e)}},{key:"grpLabelA",value:function(){if(void 0===this.afterCtrl.parentCtrl.personalInfoService.personalInfo)return!1;var e=this.afterCtrl.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;return!!this.grpA.includes(e)}},{key:"grpLabelB",value:function(){if(void 0===this.afterCtrl.parentCtrl.personalInfoService.personalInfo)return!1;var e=this.afterCtrl.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;return!!this.grpB.includes(e)}}]),o)).$inject=["$scope"]},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiEditPersonalDetailsModule=void 0;var i=e("./usi-edit-personal-details.controller");n.usiEditPersonalDetailsModule=angular.module("usiEditPersonalDetailsModule",[]).controller("usiEditPersonalDetailsController",i.usiEditPersonalDetailsController).component("usiEditPersonalDetailsComponent",{bindings:{afterCtrl:"<"},controller:"usiEditPersonalDetailsController",template:'<md-card ng-if="$ctrl.grpLabelA()" translate="customized.libraries.details" flex="100" class="bar alert-bar courier-info">\n</md-card>\n<md-card ng-if="$ctrl.grpLabelB()" translate="customized.slsp.details" flex="100" class="bar alert-bar courier-info">\n</md-card>\n<div layout="column">\n\t<md-button ng-if="$ctrl.getPatronGrp()" href="{{ $ctrl.detailsBaseEdu }}" target="_blank" layout="row" class="courier-info bar alert-bar layout-align-left-center layout-row" layout-align="left center">\n\t\t<span class="md-subhead">\n\t\t\t<prm-icon class="rotate-20 margin-right-small" icon-type="svg" svg-icon-set="primo-ui" icon-definition="pencil">\n\t\t\t</prm-icon>\n\t\t\t<span class="md-subhead" translate="customized.personal.details">\n\t\t</span>\n\t</md-button>\n\t<br />\n\t<md-button ng-if="$ctrl.getPatronGrp()" href="{{ $ctrl.detailsBaseReg }}" target="_blank" layout="row" class="courier-info bar alert-bar layout-align-left-center layout-row" layout-align="left center">\n\t\t<prm-icon class="rotate-20 margin-right-small" icon-type="svg" svg-icon-set="primo-ui" icon-definition="account-card-details">\n\t\t</prm-icon>\n\t\t<span class="md-subhead" translate="customized.libcard.number">\n\t\t</span>\n\t</md-button >\n</div>'})},{"./usi-edit-personal-details.controller":18}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiPersonalInfoAfterModule=void 0;var i=e("./usi-edit-personal-details/usi-edit-personal-details.module");(n.usiPersonalInfoAfterModule=angular.module("usiPersonalInfoAfterModule",[]).component("prmPersonalInfoAfter",{bindings:{parentCtrl:"<"},template:'<usi-edit-personal-details-component after-ctrl="$ctrl"></usi-edit-personal-details-component>'})).requires.push(i.usiEditPersonalDetailsModule.name)},{"./usi-edit-personal-details/usi-edit-personal-details.module":19}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.slspFeesLinkConfig=function(){return{feesTitle:{de:"Gebühren",en:"Fees",fr:"Frais",it:"Costi"},feesInfo:{de:"Die Gebühren der USI-Bibliotheken sind im folgenden Dokument beschrieben:",en:"USI libraries fees are described in the following document:",fr:"Les frais des bibliothèques USI sont décrits dans le document suivant:",it:"Le tariffe praticate dalle Biblioteche dell’USI sono descritte nel seguente documento:"},feesLinkText:{de:"Gebühren - Fernleihe und SLSP-Kurier",en:"Fees - Interlibrary loan and SLSP-Courier",fr:"Frais - Prêt entre bibliothèques et SLSP-Courier",it:"Tariffe - Prestito interbibliotecario e SLSP-Courier"},feesUrl:{de:"https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=de",en:"https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=en",fr:"https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=fr",it:"https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=it"}}}},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.usiConfigService=e,this.config=t,this.$element=n[0],this.form=this.$element.parentElement.parentElement}(n.slspFeesLinkController=(i(o,[{key:"$doCheck",value:function(){var e,t=!1,n=2;void 0!==this.form.children[0].children[1]&&void 0!==this.form.children[0].children[1].children[0]?t=this.form.children[0].children[1].children[0]:void 0!==this.form.children[0].children[0]&&void 0!==this.form.children[0].children[0].children[0]&&(t=this.form.children[0].children[0].children[0],n=3),t&&t.children.length==n&&((e=document.createElement("DIV")).className="courier-info bar alert-bar",e.innerHTML="<h4>"+this.usiConfigService.getLabel(this.config,"feesTitle")+"</h4>\n\t\t\t\t<p>"+this.usiConfigService.getLabel(this.config,"feesInfo")+'</p>\n\t\t\t\t<p><a href="'+this.usiConfigService.getLabel(this.config,"feesUrl")+'"\n\t\t\t\ttarget="_blank">'+this.usiConfigService.getLabel(this.config,"feesLinkText")+"</a></p>",t.insertBefore(e,t.children[n-1]))}}]),o)).$inject=["usiConfigService","slspFeesLinkConfig","$element"]},{}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.slspFeesLinkModule=void 0;var i=e("./slsp-fees-link.controller"),r=e("../../../services/usi-config.service"),o=e("./slsp-fees-link.config");n.slspFeesLinkModule=angular.module("slspFeesLinkModule",[]).factory("usiConfigService",r.usiConfigService).factory("slspFeesLinkConfig",o.slspFeesLinkConfig).controller("slspFeesLinkController",i.slspFeesLinkController).component("slspFeesLinkComponent",{controller:"slspFeesLinkController",bindings:{afterCtrl:"<"}})},{"../../../services/usi-config.service":32,"./slsp-fees-link.config":21,"./slsp-fees-link.controller":22}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiRequestAfterModule=void 0;var i=e("./slsp-fees-link/slsp-fees-link.module");(n.usiRequestAfterModule=angular.module("usiRequestAfterModule",[]).component("prmRequestAfter",{bindings:{parentCtrl:"<"},template:'<slsp-fees-link-component after-ctrl="$ctrl"></slsp-fees-link-component>'})).requires.push(i.slspFeesLinkModule.name)},{"./slsp-fees-link/slsp-fees-link.module":23}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.usiIllSigninOrderLoggedOutService=e,this.$scope=t}(n.usiIllSigninOrderLoggedOutController=(i(o,[{key:"$doCheck",value:function(){try{return this.$scope.usrNme=this.usiIllSigninOrderLoggedOutService.isGuest(),1!=this.$scope.usrNme?angular.element(document.querySelector("primo-explore")).removeClass("logged-out"):angular.element(document.querySelector("primo-explore")).addClass("logged-out")}catch(e){console.error("***SLSP*** an error occured: usiIllSigninOrderLoggedOutController\n\n"),console.error(e.message)}}}]),o)).$inject=["usiIllSigninOrderLoggedOutService","$scope"]},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiIllSigninOrderLoggedOutModule=void 0;var i=e("./usi-ill-signin-order-logged-out.controller"),r=e("./usi-ill-signin-order-logged-out.service");n.usiIllSigninOrderLoggedOutModule=angular.module("usiIllSigninOrderLoggedOutModule",[]).factory("usiIllSigninOrderLoggedOutService",r.usiIllSigninOrderLoggedOutService).controller("usiIllSigninOrderLoggedOutController",i.usiIllSigninOrderLoggedOutController).component("usiIllSigninOrderLoggedOutComponent",{bindings:{afterCtrl:"<"},controller:"usiIllSigninOrderLoggedOutController"})},{"./usi-ill-signin-order-logged-out.controller":25,"./usi-ill-signin-order-logged-out.service":27}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.usiIllSigninOrderLoggedOutService=["jwtHelper",function(t){function n(){try{if(!sessionStorage)return console.error("***SLSP*** no session storage"),null;var e=sessionStorage.getItem("primoExploreJwt");return e?t.decodeToken(e):null}catch(e){console.error("**SLSP*** an error occured: userService.getDecodedToken:"),console.error(e.message)}}return{isGuest:function(){try{var e=n();return e?!("GUEST"!==e.userGroup?e.userName:""):null}catch(e){console.error("***SLSP*** an error occured: userService.isGuest:"),console.error(e.message)}},getDecodedToken:n}}]},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),console.log("***USI*** usiLangSwitchControler constructor"),this.$parent=e.parent().parent()[0],this.parentCtrl=this.afterCtrl.parentCtrl,this.$window=t}(n.usiLangSwitchController=(i(o,[{key:"$onInit",value:function(){try{this.languages=["it","en","de","fr"],this.languages.includes(this.parentCtrl.lang)||this.changeLanguage("en")}catch(e){console.error("***USI*** usiLangSwitchControler $onInit"),console.error(e.message)}}},{key:"changeLanguage",value:function(e){this.parentCtrl.changeLangService.addLangParamToUrl(e);var t=this.parentCtrl;this.parentCtrl.i18nService.setLanguage(e).then(function(){t.$timeout(function(){return t.$state.go(t.$state.current,{lang:e},{reload:!0})})})}}]),o)).$inject=["$element"]},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiLangSwitchModule=void 0;var i=e("./usi-lang-switch.controller");n.usiLangSwitchModule=angular.module("usiLangSwitchModule",[]).controller("usiLangSwitchController",i.usiLangSwitchController).component("usiLangSwitchComponent",{bindings:{afterCtrl:"<"},controller:"usiLangSwitchController",template:'<button class="md-button md-lang-button" ng-repeat="lang in $ctrl.languages" ng-class="{active: $ctrl.afterCtrl.parentCtrl.lang == lang}" ng-click="$ctrl.changeLanguage(lang)">{{lang}}</button>'})},{"./usi-lang-switch.controller":28}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.usiUserAreaExpandableAfterModule=void 0;var i=e("./usi-lang-switch/usi-lang-switch.module"),r=e("./usi-ill-signin-order-logged-out/usi-ill-signin-order-logged-out.module"),o=n.usiUserAreaExpandableAfterModule=angular.module("usiUserAreaExpandableAfterModule",[]).component("prmUserAreaExpandableAfter",{bindings:{parentCtrl:"<"},template:'<usi-lang-switch-component after-ctrl="$ctrl"></usi-lang-switch-component><usi-ill-signin-order-logged-out-component fter-ctrl="$ctrl"></usi-ill-signin-order-logged-out-component>'});o.requires.push(i.usiLangSwitchModule.name),o.requires.push(r.usiIllSigninOrderLoggedOutModule.name)},{"./usi-ill-signin-order-logged-out/usi-ill-signin-order-logged-out.module":26,"./usi-lang-switch/usi-lang-switch.module":29}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.slspHttpInterceptRequests=angular.module("slspHttpInterceptRequests",["ng"]).config(["$httpProvider",function(e){e.interceptors.push(["$q",function(t){return{request:function(e){return e},requestError:function(e){return t.reject(e)},responseError:function(e){return t.reject(e)},response:function(e){try{if(/primaws\/rest\/priv\/myaccount\/requests/.test(e.config.url)&&200==e.status&&"ok"==e.data.status){var t=angular.element(document.querySelector("primo-explore")).injector().get("$rootScope").$$childHead.$ctrl.userSessionManagerService.getUserLanguage()||window.appConfig["primo-view"]["attributes-map"].interfaceLanguage,n={en:["in transit","in process","on hold shelf"],de:["transfer","in bearbeitung","bereitgestellt"],fr:["en cours de transfert","en cours","sur le rayon des réservations"],it:["in transito","in processo","scaffale prenotazioni"]},i={en:["in transit","in process"],de:["transfer","in bearbeitung"],fr:["en cours de transfert","en cours"],it:["in transito","in processo"]};if(!Object.keys(n).includes(t))throw"No mapping found for holds: "+t;var r=RegExp(n[t].map(function(e){return e.toLowerCase()}).join("|"));if(e.data.data.holds.hold.map(function(e){r.test(e.holdstatus.toLowerCase())&&(e.cancel="N")}),!Object.keys(i).includes(t))throw"No mapping found for photocopies: "+t;var o=RegExp(i[t].map(function(e){return e.toLowerCase()}).join("|"));e.data.data.photocopies.photocopy.map(function(e){o.test(e.requeststatus.toLowerCase())&&(e.cancel="N")})}}catch(e){console.error(e)}return e}}}])}])},{}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.usiConfigService=["$rootScope","jwtHelper",function(n,t){function i(){try{var e=n.$$childHead.$ctrl.userSessionManagerService;return e?e.getUserLanguage()||$window.appConfig["primo-view"]["attributes-map"].interfaceLanguage:(console.error("***USI*** usiConfigService: userSessionManagerService not available"),"fr")}catch(e){return console.error("***USI*** an error occured: usiConfigService.getLanguage():"),console.error(e.message),"fr"}}function r(){try{if(!sessionStorage)return console.error("***USI*** no session storage"),null;var e=sessionStorage.getItem("primoExploreJwt");return e?t.decodeToken(e):null}catch(e){console.error("***USI*** an error occured: usiConfigService.getDecodedToken:"),console.error(e.message)}}return{getLanguage:i,getLabel:function(e,t){try{var n=i();return e[t]?e[t][n]?e[t][n]:e[t].fr:(console.error("***USI*** usiConfigService.getLabel: '"+t+"' not in config"),t)}catch(e){return console.error("***USI*** an error occured: usiConfigService.getLabel():"),console.error(e.message),""}},getView:function(){try{var e=n.$$childHead.$ctrl.userSessionManagerService;return e?e.vid:(console.error("***USI*** usiConfigService: userSessionManagerService not available"),"")}catch(e){return console.error("***USI*** an error occured: usiConfigService.getVid():"),console.error(e.message),"fr"}},getParam:function(e){try{var t=n.$$childHead.$ctrl.userSessionManagerService.$stateParams;return t?t[e]:(console.error("***USI*** usiConfigService: userSessionManagerService not available"),"")}catch(e){return console.error("***USI*** an error occured: usiConfigService.getVid():"),console.error(e.message),"fr"}},getUsergroup:function(){var e=r();return e?e.userGroup:null},isGuest:function(){var e=r();return e?!("GUEST"!==e.userGroup?e.userName:""):null},getDecodedToken:r,onCampus:function(){try{var e=r();return e?"true"===e.onCampus:null}catch(e){console.error("***BCU*** an error occured:usiConfigService.onCampus:"),console.error(e.message)}}}}]},{}]},{},[1]);
//# sourceMappingURL=custom.js.map
