{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/41SLSP_USI-BiUSI/js/main.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/alma-howovp-after/alma-how-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/alma-howovp-after/usi-howovp/usi-howovp.config.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/alma-howovp-after/usi-howovp/usi-howovp.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/alma-howovp-after/usi-howovp/usi-howovp.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-holdings-after/usi-location-holdings-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-holdings-after/usi-location-open-close/usi-location-open-close.config.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-holdings-after/usi-location-open-close/usi-location-open-close.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-holdings-after/usi-location-open-close/usi-location-open-close.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-item-after/usi-item-red-text/usi-item-red-text.config.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-item-after/usi-item-red-text/usi-item-red-text.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-item-after/usi-item-red-text/usi-item-red-text.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-item-after/usi-location-item-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-items-after/usi-links/usi-links.config.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-items-after/usi-links/usi-links.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-items-after/usi-links/usi-links.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-items-after/usi-location-items-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-personal-info-after/usi-edit-personal-details/usi-edit-personal-details.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-personal-info-after/usi-edit-personal-details/usi-edit-personal-details.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-personal-info-after/usi-personal-info-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-request-after/slsp-fees-link/slsp-fees-link.config.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-request-after/slsp-fees-link/slsp-fees-link.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-request-after/slsp-fees-link/slsp-fees-link.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-request-after/usi-request-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-ill-signin-order-logged-out/usi-ill-signin-order-logged-out.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-ill-signin-order-logged-out/usi-ill-signin-order-logged-out.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-ill-signin-order-logged-out/usi-ill-signin-order-logged-out.service.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-lang-switch/usi-lang-switch.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-lang-switch/usi-lang-switch.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-user-area-expandable-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/slsp-http-intercept-requests/slsp-http-intercept-requests.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/services/usi-config.service.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_usiLocationItemsAfter","_usiLocationHoldingsAfter","_usiLocationItemAfter","_usiPersonalInfoAfter","_usiUserAreaExpandableAfter","_usiRequestAfter","_almaHowAfter","_slspHttpInterceptRequests","app","angular","requires","push","usiLocationItemsAfterModule","name","usiLocationHoldingsAfterModule","usiLocationItemAfterModule","usiPersonalInfoAfterModule","usiUserAreaExpandableAfterModule","usiRequestAfterModule","usiAlmaHowovpAfterModule","slspHttpInterceptRequests","_usiHowovp","component","bindings","parentCtrl","template","usiHowovpModule","usiHowovpConfig","title","de","en","fr","it","ill","msg","usiHowovpController","usiConfigService","_classCallCheck","this","span","howovp","ovpTitle","element","document","querySelector","console","log","createElement","getLabel","innerHTML","replace","replaceWith","className","insertBefore","children","$inject","_usiConfig","_usiHowovp2","factory","controller","afterCtrl","_usiLocationOpenClose","usiLocationOpenCloseModule","usiLocationOpenCloseConfig","open","closed","usiLocationOpenCloseController","$element","config","usilocation","currLoc","isopen","includes","location","subLocationCode","isusi","organization","error","message","_usiLocationOpenClose2","usiItemRedTextConfig","labisalp","cattedre","btm","sequential","sameday","seven","twentyeight","usiItemRedTextController","segnatura","fakePolicy","itempolicyElement","parentElement","innerText","style","color","loc","callNumber","startsWith","append","holdinglocation","text","contactlink","getLanguage","_usiItemRedText","_usiItemRedText2","usiItemRedTextModule","usiLinksConfig","mendrisio","lugano","usiLinksController","librarycodeTranslation","libraryCode","today","Date","getTime","from","to","userSessionManagerService","attributesMap","interfaceLanguage","_usiLinks","_usiLinks2","usiLinksModule","usiEditPersonalDetailsController","$scope","lang","sms","$root","$$childHead","$ctrl","getInterfaceLanguage","detailsBaseEdu","detailsBaseReg","exclude","grpA","grpB","undefined","personalInfoService","personalInfo","patron","patronstatus","registration","institution","patronstatuscode","labelA","labelB","_usiEditPersonalDetails","usiEditPersonalDetailsModule","slspFeesLinkConfig","feesTitle","feesInfo","feesLinkText","feesUrl","slspFeesLinkController","form","info","formLength","_slspFeesLink","_slspFeesLink2","slspFeesLinkModule","usiIllSigninOrderLoggedOutController","usiIllSigninOrderLoggedOutService","usrNme","isGuest","removeClass","addClass","_usiIllSigninOrderLoggedOut","_usiIllSigninOrderLoggedOut2","usiIllSigninOrderLoggedOutModule","jwtHelper","getDecodedToken","sessionStorage","jwt","getItem","decodeToken","decodedToken","userGroup","userName","usiLangSwitchController","$window","$parent","parent","languages","changeLanguage","changeLangService","addLangParamToUrl","i18nService","setLanguage","then","$timeout","$state","go","current","reload","_usiLangSwitch","usiLangSwitchModule","$httpProvider","interceptors","$q","request","_request","requestError","reject","responseError","response","_response","test","url","status","data","injector","get","getUserLanguage","window","appConfig","list_of_hold_states","list_of_photocopy_states","Object","keys","list_of_hold_states_regexp","RegExp","map","m","toLowerCase","join","holds","hold","holdstatus","cancel","list_of_photocopy_states_regexp","photocopies","photocopy","requeststatus","$rootScope","key","getView","vid","getParam","param","$stateParams","getUsergroup","onCampus"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import {usiLocationItemsAfterModule} from './modules/prm-location-items-after/usi-location-items-after.module';\nimport {usiLocationHoldingsAfterModule} from './modules/prm-location-holdings-after/usi-location-holdings-after.module';\nimport {usiLocationItemAfterModule} from './modules/prm-location-item-after/usi-location-item-after.module';\nimport {usiPersonalInfoAfterModule} from './modules/prm-personal-info-after/usi-personal-info-after.module';\nimport {usiUserAreaExpandableAfterModule} from './modules/prm-user-area-expandable-after/usi-user-area-expandable-after.module';\nimport {usiRequestAfterModule} from './modules/prm-request-after/usi-request-after.module';\nimport {usiAlmaHowovpAfterModule} from './modules/alma-howovp-after/alma-how-after.module';\nimport {slspHttpInterceptRequests} from './modules/slsp-http-intercept-requests/slsp-http-intercept-requests.module';\n\nlet app = angular.module('viewCustom', ['angularLoad']);\n\napp.requires.push(usiLocationItemsAfterModule.name);\napp.requires.push(usiLocationHoldingsAfterModule.name);\napp.requires.push(usiLocationItemAfterModule.name);\napp.requires.push(usiPersonalInfoAfterModule.name);\napp.requires.push(usiUserAreaExpandableAfterModule.name);\napp.requires.push(usiRequestAfterModule.name);\napp.requires.push(usiAlmaHowovpAfterModule.name);\napp.requires.push(slspHttpInterceptRequests.name);","import {usiHowovpModule} from './usi-howovp/usi-howovp.module';\n\nexport const usiAlmaHowovpAfterModule = angular\n    .module('usiAlmaHowovpAfterModule', [])\n        .component('almaHowovpAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-howovp-component after-ctrl=\"$ctrl\"></usi-howovp-component>'\n        });\n\nusiAlmaHowovpAfterModule.requires.push(usiHowovpModule.name);","export const usiHowovpConfig = function(){\n    return {\n        title: {\n            de: 'Andere Ausleih- und Bestelloptionen',\n            en: 'Other loan and request options',\n            fr: 'Autres options de prêt et de demande',\n            it: 'Altre opzioni di prestito e richiesta'\n        },\n        ill: {\n            de: 'Fernleihe',\n            en: 'Inter Library Loan (ILL)',\n            fr: 'Prêt entre bibliothèques',\n            it: 'Prestito interbibliotecario'\n        },\n        msg: {\n            de: 'Achtung: diese Option nur wählen, wenn kein Exemplar unter \"\" verfügbar ist!',\n            en: 'Attention: use this method only in case no item is available under \"\"',\n            fr: 'Attention: n\\'utilisez cette option que dans le cas où aucun exemplaire n\\'est disponible sous \"\"!',\n            it: 'Attenzione: utilizzate questo metodo solo se non sono disponibili opzioni in \"\"!'\n        }\n    }\n}","export class usiHowovpController {\n    constructor(usiConfigService, usiHowovpConfig) {\n        this.usiConfigService = usiConfigService;\n        this.usiHowovpConfig = usiHowovpConfig;\n    }\n\n    $doCheck() {\n        let ill = angular.element(document.querySelector('alma-howovp md-list-item span[translate]'));\n        console.log(ill);\n        if (ill.length) {\n            let span = document.createElement('div');\n            let title = this.usiConfigService.getLabel(this.usiHowovpConfig, 'ill');\n            //this.afterCtrl.parentCtrl.$translate.instant('mainmenu.label.BlankIll');\n            \n            // span.innerHTML = '<h3>' + this.usiConfigService.getLabel(this.usiHowovpConfig, 'ill') + '</h3>' + this.usiConfigService.getLabel(this.usiHowovpConfig, 'msg').replace('\"\"', '<strong>\"' + this.usiConfigService.getLabel(this.usiHowovpConfig, 'title') +'\"</strong>');\n            span.innerHTML = this.usiConfigService.getLabel(this.usiHowovpConfig, 'msg').replace('\"\"', '<strong>\"' + this.usiConfigService.getLabel(this.usiHowovpConfig, 'title') +'\"</strong>');\n            ill[0].replaceWith(span);\n            let howovp = angular.element(document.querySelector('alma-howovp'));\n            let ovpTitle = document.createElement('h3');\n            ovpTitle.className = 'medium-uppercase-bold ill';\n            ovpTitle.innerHTML = '<br><span>' + title + '</span>';\n            howovp[0].insertBefore(ovpTitle,howovp[0].children[0]);\n        }\n    }\n}\n\nusiHowovpController.$inject = [ 'usiConfigService', 'usiHowovpConfig' ];\n\n","import {usiConfigService} from '../../../services/usi-config.service';\nimport {usiHowovpController} from './usi-howovp.controller';\nimport {usiHowovpConfig} from './usi-howovp.config';\n\nexport const usiHowovpModule = angular\n    .module('usiHowovpModule', [])\n        .factory('usiConfigService', usiConfigService)\n        .factory('usiHowovpConfig', usiHowovpConfig)\n        .controller('usiHowovpController', usiHowovpController)\n        .component('usiHowovpComponent',{\n            bindings: {afterCtrl: '<'},\n            controller: 'usiHowovpController',\n\n        })\n","import {usiLocationOpenCloseModule} from './usi-location-open-close/usi-location-open-close.module';\n\nexport const usiLocationHoldingsAfterModule = angular\n    .module('usiLocationHoldingsAfterModule', [])\n        .component('prmLocationHoldingsAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-location-open-close-component after-ctrl=\"$ctrl\"></usi-location-open-close-component>'\n        });\n\nusiLocationHoldingsAfterModule.requires.push(usiLocationOpenCloseModule.name);","export const usiLocationOpenCloseConfig = function(){\n    return {\n        open: {\n            de: 'Frei zugänglich',\n            en: 'Open stacks',\n            fr: 'Libre accès',\n            it: 'A libero accesso'\n        },\n        closed: {\n            de: 'Geschlossener Standort',\n            en: 'Closed stacks',\n            fr: 'Rayon non accessible',\n            it: 'A scaffale chiuso'\n        }\n    }\n}","export class usiLocationOpenCloseController {\n\n    constructor( usiConfigService, usiLocationOpenCloseConfig, $element ) {\n        console.log(\"***USI*** usiLocationOpenCloseController.constructor\\n\\n\");\n        this.usiConfigService = usiConfigService;\n        this.config = usiLocationOpenCloseConfig;\n        this.usilocation = {};\n    }\n\n    $onInit() {\n        if ( typeof this.afterCtrl.parentCtrl.currLoc === \"undefined\" ) {\n            return;\n        }\n        try {\n            console.log(\"***USI*** usiLocationOpenCloseController.$onInit\\n\\n\");\n            let openLocations = [ '201', '202', '208', '801', '803', '804', '805', '808', '810', '819', '823', '827', '831', '832', '833', '834', '841', '842', '843', '844' ];\n            this.usilocation.isopen = ( openLocations.includes( this.afterCtrl.parentCtrl.currLoc.location.subLocationCode ) ) ? true : false;\n            this.usilocation.isusi = ( this.afterCtrl.parentCtrl.currLoc.location.organization == '41SLSP_USI' ) ? true : false;\n        }\n        catch (e) {\n            console.error(\"***USI*** an error occured: usiLocationOpenCloseController.$onInit\\n\\n\");\n            console.error(e.message);\n            throw(e)\n        }\n    }\n}\n\nusiLocationOpenCloseController.$inject = [ 'usiConfigService', 'usiLocationOpenCloseConfig', '$element' ];","import {usiConfigService} from '../../../services/usi-config.service';\nimport {usiLocationOpenCloseConfig} from './usi-location-open-close.config';\nimport {usiLocationOpenCloseController} from './usi-location-open-close.controller';\nimport {usiLocationOpenCloseHtml} from './usi-location-open-close.html';\n\nexport const usiLocationOpenCloseModule = angular\n    .module('usiLocationOpenCloseModule', [])\n        .factory('usiConfigService', usiConfigService)\n        .factory('usiLocationOpenCloseConfig', usiLocationOpenCloseConfig)\n        .controller('usiLocationOpenCloseController', usiLocationOpenCloseController)\n        .component('usiLocationOpenCloseComponent',{\n            controller: 'usiLocationOpenCloseController',\n            bindings: {afterCtrl: '<'},\n            template: usiLocationOpenCloseHtml\n        })\n\n","export const usiItemRedTextConfig = function(){\n    return {\n        labisalp: {\n            de: 'Benutzung nach Vereinbarung bei LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, Mo-Fr 9-17 Uhr',\n            en: 'Consultation by appointment at LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, Mo-Fr 9am-5pm',\n            fr: 'Consultation sur rendez-vous chez LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, lun-ven 9h-17h',\n            it: 'Consultabile su appuntamento c/o LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, Lu-Ve 09:00-17:00'\n        },\n        cattedre: {\n            de: 'Wenden Sie sich an die jeweilige Abteilung (für Details klicken)',\n            en: 'Address yourself to the specific department (click for details)',\n            fr: 'Adressez-vous au département spécifique (cliquez pour plus de détails)',\n            it: 'Rivolgersi alla cattedra specifica (cliccare per vedere i dettagli)'\n        },\n        btm: {\n            de: 'Zugang nach Vereinbarung, siehe',\n            en: 'Consultation on appointment, see',\n            fr: 'Consultation sur rendez-vous, voir ',\n            it: 'Consultazione su appuntamento, vedi'\n        },\n        sequential: {\n            de: 'Achtung: dieses Buch ist in Zahlenreihenfolge auf dem Regal geordnet (siehe Nummer links)',\n            en: 'Attention: this book is ordered in numerical sequence on the shelf (see number on the left) ',\n            fr: 'Attention : les livres de cette collection sont triés selon l’ordre numérique (voir numéro à gauche)',\n            it: 'Attenzione: i libri di questo fondo sono ordinati a scaffale secondo la sequenza numerica (v. numero a sinistra)'\n        },\n        sameday: {\n            de: 'Benutzung nur in der Bibliothek',\n            en: 'In-library consultation only',\n            fr: 'Consultation uniquement en bibliothèque',\n            it: 'Consultazione solo in biblioteca'\n        },\n        seven: {\n            de: 'Leihfrist 7 Tage',\n            en: '7 days loan',\n            fr: 'Prêt 7 jours',\n            it: 'Prestito 7 giorni'\n        },\n        twentyeight: {\n            de: 'Leihfrist 28 Tage',\n            en: '28 days loan',\n            fr: 'Prêt 28 jours',\n            it: 'Prestito 28 giorni'\n        }\n    }\n}","export class usiItemRedTextController {\n\n    constructor( usiConfigService, usiItemRedTextConfig, $element ) {\n        console.log(\"***USI*** usiItemRedTextController.constructor\\n\\n\");\n        this.usiConfigService = usiConfigService;\n        this.config = usiItemRedTextConfig;\n        this.element = $element[0];\n    }\n\n    $doCheck() {\n        // correct english-only policy names\n        const itempolicyElement = this.element.parentElement.parentElement.children[0].children[0].children[0].children[1];\n\n        if ( typeof itempolicyElement === \"undefined\" ) {\n            let segnatura = this.afterCtrl.parentCtrl.loc.location.callNumber;\n            if ( segnatura.startsWith(\"BUL B\") || segnatura.startsWith(\"BUL C\") || segnatura.startsWith(\"BUL D\") || segnatura.startsWith(\"BUL F\") || segnatura.startsWith(\"BUL N\") || segnatura.startsWith(\"BUL T\") ) {\n                let fakePolicy = document.createElement(\"div\");\n                fakePolicy.innerText = this.usiConfigService.getLabel(this.config, 'sameday');\n    \t\t    fakePolicy.style.color = \"red\";\n                console.log(this.element.parentElement.parentElement.children[0].children[0].children[0]);\n                this.element.parentElement.parentElement.children[0].children[0].children[0].append(fakePolicy);\n            }\n            return;\n        }\n\n    \tif ( itempolicyElement.innerText == 'Same Day Loan') {\n    \t\titempolicyElement.innerText = this.usiConfigService.getLabel(this.config, 'sameday');\n    \t\titempolicyElement.style.color = \"red\";\n    \t}\n    \tif ( itempolicyElement.innerText == '28 Days Loan') {\n    \t\titempolicyElement.innerText = this.usiConfigService.getLabel(this.config, 'twentyeight');\n    \t}\n    \tif ( itempolicyElement.innerText == '7 Days Loan') {\n    \t\titempolicyElement.innerText = this.usiConfigService.getLabel(this.config, 'seven');\n    \t}\n    \titempolicyElement.style[\"font-size\"] = \"14px\";\n    }\n\n    // $onInit() {\n    getText() {\n        this.holdinglocation = {\n            message: false,\n            btm: false,\n            text: \"\",\n            contactlink: \"\"\n        };\n        try {\n            switch( this.afterCtrl.parentCtrl.loc.location.subLocationCode ) {\n                case '820':\n                \tthis.holdinglocation.message = true;\n                \tthis.holdinglocation.text = this.usiConfigService.getLabel(this.config, 'labisalp');\n                    break;\n\t\t\t\tcase '845':\n                \tthis.holdinglocation.message = true;\n\t                this.holdinglocation.text = this.usiConfigService.getLabel(this.config, 'cattedre');\n\t                break;\n\t\t\t\tcase '809':\n                    this.holdinglocation.message = true;\n                \tthis.holdinglocation.btm = true;\n\t                this.holdinglocation.text = this.usiConfigService.getLabel(this.config, 'btm');\n\t\t\t\t\tthis.holdinglocation.contactlink = ( this.usiConfigService.getLanguage() == 'it' ) ? 'http://www.arc.usi.ch/it/btm' : 'https://www.arc.usi.ch/en/risorse-e-servizi/servizi/biblioteca-tecnica-e-dei-materiali';\n\t                break;\n\t\t\t\tcase '810':\n                \tthis.holdinglocation.message = true;\n\t                this.holdinglocation.text = this.usiConfigService.getLabel(this.config, 'sequential');\n\t                break;\n\t\t\t\tdefault:\n                \tthis.holdinglocation = 'normal';\n            }\n            return this.holdinglocation;\n\n        }\n        catch (e) {\n            console.error(\"***USI*** an error occured: usiItemRedTextController.$onInit\\n\\n\");\n            console.error(e.message);\n            throw(e)\n        }\n    }\n}\n\nusiItemRedTextController.$inject = [ 'usiConfigService', 'usiItemRedTextConfig', '$element' ];","import {usiConfigService} from '../../../services/usi-config.service';\nimport {usiItemRedTextConfig} from './usi-item-red-text.config';\nimport {usiItemRedTextController} from './usi-item-red-text.controller';\nimport {usiItemRedTextHtml} from './usi-item-red-text.html';\n\nexport const usiItemRedTextModule = angular\n    .module('usiItemRedTextModule', [])\n        .factory('usiConfigService', usiConfigService)\n        .factory('usiItemRedTextConfig', usiItemRedTextConfig)\n        .controller('usiItemRedTextController', usiItemRedTextController)\n        .component('usiItemRedTextComponent',{\n            bindings: {afterCtrl: '<'},\n            controller: 'usiItemRedTextController',\n            template: usiItemRedTextHtml\n        })","import {usiItemRedTextModule} from './usi-item-red-text/usi-item-red-text.module';\n\nexport const usiLocationItemAfterModule = angular\n    .module('usiLocationItemAfterModule', [])\n        .component('prmLocationItemAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-item-red-text-component after-ctrl=\"$ctrl\"></usi-item-red-text-component>'\n        });\n\nusiLocationItemAfterModule.requires.push(usiItemRedTextModule.name);","export const usiLinksConfig = function(){\n    return {\n        mendrisio: {\n            de: 'http:\\/\\/biblio.arc.usi.ch\\/en',\n            en: 'http:\\/\\/biblio.arc.usi.ch\\/en',\n            fr: 'http:\\/\\/biblio.arc.usi.ch\\/en',\n            it: 'http:\\/\\/biblio.arc.usi.ch'\n        },\n        lugano: {\n            de: 'https:\\/\\/en.bul.sbu.usi.ch',\n            en: 'https:\\/\\/en.bul.sbu.usi.ch',\n            fr: 'https:\\/\\/en.bul.sbu.usi.ch',\n            it: 'https:\\/\\/it.bul.sbu.usi.ch'\n        }\n    }\n}","export class usiLinksController {\n    constructor(usiConfigService, usiLinksConfig) {\n        this.usiConfigService = usiConfigService;\n        this.usiLinksConfig = usiLinksConfig;\n    }\n\n    $onInit() {\n        try {\n            console.log(\"***USI*** usiLinksController.$onInit\\n\\n\");\n        }\n        catch (e) {\n            console.error(\"***USI*** an error occured: usiLinksController.$onInit\\n\\n\");\n            console.error(e.message);\n            throw(e)\n        }\n    }\n\n    getLibrary() {\n        if ( typeof this.afterCtrl.parentCtrl.currLoc === \"undefined\" ) {\n            return;\n        }\n        return this.afterCtrl.parentCtrl.currLoc.location.librarycodeTranslation;\n    }\n\n    getLink() {\n        if ( typeof this.afterCtrl.parentCtrl.loc === \"undefined\" && typeof this.afterCtrl.parentCtrl.currLoc  === \"undefined\" ) {\n            return;\n        }\n        if (this.afterCtrl.parentCtrl.loc.location.libraryCode == 'MEAA' || this.afterCtrl.parentCtrl.currLoc.location.libraryCode == 'MEAA') {\n            // return 'http:\\/\\/biblio.arc.usi.ch';\n            return this.usiConfigService.getLabel(this.usiLinksConfig, 'mendrisio');\n        }\n        else if (this.afterCtrl.parentCtrl.loc.location.libraryCode == 'LUBUL' || this.afterCtrl.parentCtrl.currLoc.location.libraryCode == 'LUBUL'){\n            return this.usiConfigService.getLabel(this.usiLinksConfig, 'lugano');\n        }\n        else {\n            return `https:\\/\\/registration.slsp.ch\\/libraries\\/\\?library\\=${this.afterCtrl.parentCtrl.loc.location.libraryCode}`;\n        }\n    }\n\n    getStyle() {\n        return '';\n    }\n\n    getMEAAclosureMessage() {\n        // check if today is in given closure range\n        var today = new Date().getTime();\n        // the month is 0-indexed! For example, new Date(1995, 11, 17) resolves to December 17, 1995\n        var from = new Date(2021, 6, 21).getTime();\n        var to = new Date(2021, 7, 8).getTime();\n        var withinRange = today >= from && today <= to;\n        // return closure message, or return false\n        if ( withinRange ) {\n            switch ( this.afterCtrl.parentCtrl.userSessionManagerService.attributesMap.interfaceLanguage ) {\n                case \"it\":\n                return \"Attenzione: servizi sospesi per chiusura estiva dal 26 luglio all’8 agosto\"\n                break;\n                default:\n                return \"Attention: services suspended due to summer closure from 26 July to 8 August\"\n            }\n        }\n        else {\n            return false;\n        }\n    }\n}\n\nusiLinksController.$inject = [ 'usiConfigService', 'usiLinksConfig' ];","import {usiConfigService} from '../../../services/usi-config.service';\nimport {usiLinksController} from './usi-links.controller';\nimport {usiLinksHtml} from './usi-links.html';\nimport {usiLinksConfig} from './usi-links.config';\n\nexport const usiLinksModule = angular\n    .module('usiLinksModule', [])\n        .factory('usiConfigService', usiConfigService)\n        .factory('usiLinksConfig', usiLinksConfig)\n        .controller('usiLinksController', usiLinksController)\n        .component('usiLinksComponent',{\n            bindings: {afterCtrl: '<'},\n            controller: 'usiLinksController',\n            template: usiLinksHtml\n        })\n","import {usiLinksModule} from './usi-links/usi-links.module';\n\nexport const usiLocationItemsAfterModule = angular\n    .module('usiLocationItemsAfterModule', [])\n        .component('prmLocationItemsAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-links-component after-ctrl=\"$ctrl\"></usi-links-component>'\n        });\n\nusiLocationItemsAfterModule.requires.push(usiLinksModule.name);\n","export class usiEditPersonalDetailsController {\n\n    constructor($scope) {\n        let lang = 'en';\n        let sms = $scope.$root.$$childHead.$ctrl.userSessionManagerService;\n        if (sms) {\n            lang = sms.getInterfaceLanguage();\n        }\n\n        this.detailsBaseEdu = \"https:\\/\\/eduid.ch\\/web\\/change-account-data\\/2\\/?lang=\" + lang;\n        this.detailsBaseReg = \"https:\\/\\/registration.slsp.ch\\/library-card\\/?lang=\" + lang;\n        this.exclude = ['STAFF', '11', '12', '13', '14', '15', '16', '91', '92', '99'];\n        this.grpA = ['11', '91', '92'];\n        this.grpB = ['12', '13', '14', '15', '16'];\n    }\n\n    getPatronGrp() {\n        if (this.afterCtrl.parentCtrl.personalInfoService.personalInfo !== undefined) {\n            let patron = this.afterCtrl.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n            if (!this.exclude.includes(patron)) {\n                return true;\n            }\n            else {\n                return false;\n        \t}\n        }\n\t\treturn false;\n    }\n\n    grpLabelA() {\n        if (this.afterCtrl.parentCtrl.personalInfoService.personalInfo !== undefined) {\n            let labelA = this.afterCtrl.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n            if (this.grpA.includes(labelA)) {\n                return true;\n            }\n            else {\n                return false;\n        \t}\n    \t}\n        return false;\n\t}\n\n\n    grpLabelB() {\n        if (this.afterCtrl.parentCtrl.personalInfoService.personalInfo !== undefined) {\n            let labelB = this.afterCtrl.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n            if (this.grpB.includes(labelB)) {\n                return true;\n            }\n            else {\n                return false;\n        \t}\n\t\t}\n        return false;\n    }\n}\n\nusiEditPersonalDetailsController.$inject = [ '$scope' ];","import {usiEditPersonalDetailsController} from './usi-edit-personal-details.controller';\nimport {usiEditPersonalDetailsHtml} from './usi-edit-personal-details.html';\n\nexport const usiEditPersonalDetailsModule = angular\n    .module('usiEditPersonalDetailsModule', [])\n        .controller('usiEditPersonalDetailsController', usiEditPersonalDetailsController)\n        .component('usiEditPersonalDetailsComponent',{\n            bindings: {afterCtrl: '<'},\n            controller: 'usiEditPersonalDetailsController',\n            template: usiEditPersonalDetailsHtml\n        })\n","import {usiEditPersonalDetailsModule} from './usi-edit-personal-details/usi-edit-personal-details.module';\n\nexport const usiPersonalInfoAfterModule = angular\n    .module('usiPersonalInfoAfterModule', [])\n        .component('prmPersonalInfoAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-edit-personal-details-component after-ctrl=\"$ctrl\"></usi-edit-personal-details-component>'\n        });\n\nusiPersonalInfoAfterModule.requires.push(usiEditPersonalDetailsModule.name);\n","export const slspFeesLinkConfig = function(){\n    return {\n        feesTitle: {\n            de: 'Gebühren',\n            en: 'Fees',\n            fr: 'Frais',\n            it: 'Costi'\n        },\n        feesInfo: {\n            de: 'Die Gebühren der USI-Bibliotheken sind im folgenden Dokument beschrieben:',\n            en: 'USI libraries fees are described in the following document:',\n            fr: 'Les frais des bibliothèques USI sont décrits dans le document suivant:',\n            it: 'Le tariffe praticate dalle Biblioteche dell’USI sono descritte nel seguente documento:'\n        },\n        feesLinkText: {\n            de: 'Gebühren - Fernleihe und SLSP-Kurier',\n            en: 'Fees - Interlibrary loan and SLSP-Courier',\n            fr: 'Frais - Prêt entre bibliothèques et SLSP-Courier',\n            it: 'Tariffe - Prestito interbibliotecario e SLSP-Courier'\n        },\n        feesUrl: {\n            de: 'https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=de',\n            en: 'https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=en',\n            fr: 'https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=fr',\n            it: 'https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=it'\n        },\n    }\n}\n","export class slspFeesLinkController {\n\n\tconstructor(usiConfigService, slspFeesLinkConfig, $element) {\n        this.usiConfigService = usiConfigService;\n        this.config = slspFeesLinkConfig;\n\t\tthis.$element = $element[0];\n        this.form = this.$element.parentElement.parentElement;\n\t}\n\n\t$doCheck() {\n\t\tlet form = false;\n\t\tlet formLength = 2;\n\n\t\tif (this.form.children[0].children[1] !== undefined && this.form.children[0].children[1].children[0] !== undefined) {\n\t\t\tform = this.form.children[0].children[1].children[0];\n\t\t}\n\t\telse if (this.form.children[0].children[0] !== undefined && this.form.children[0].children[0].children[0] !== undefined) {\n\t\t\tform = this.form.children[0].children[0].children[0];\n\t\t\tformLength = 3;\n\t\t}\n\n\t\t//create and insert fees info block if not present\n\t\tif (form && form.children.length == formLength) {\n\t\t\tlet info = document.createElement('DIV');\n\t\t\tinfo.className = \"courier-info bar alert-bar\";\n\t\t\tinfo.innerHTML =\n\t\t\t\t`<h4>${this.usiConfigService.getLabel(this.config, 'feesTitle')}</h4>\n\t\t\t\t<p>${this.usiConfigService.getLabel(this.config, 'feesInfo')}</p>\n\t\t\t\t<p><a href=\"${this.usiConfigService.getLabel(this.config, 'feesUrl')}\"\n\t\t\t\ttarget=\"_blank\">${this.usiConfigService.getLabel(this.config, 'feesLinkText')}</a></p>`;\n\t\t\tform.insertBefore(info, form.children[formLength - 1]);\n\t\t}\n\t}\n}\n\nslspFeesLinkController.$inject = [ 'usiConfigService', 'slspFeesLinkConfig', '$element' ];","import {slspFeesLinkController} from './slsp-fees-link.controller';\nimport {usiConfigService} from '../../../services/usi-config.service';\nimport {slspFeesLinkConfig} from './slsp-fees-link.config';\n\nexport const slspFeesLinkModule = angular\n    .module('slspFeesLinkModule', [])\n        .factory('usiConfigService', usiConfigService)\n        .factory('slspFeesLinkConfig', slspFeesLinkConfig)\n        .controller('slspFeesLinkController', slspFeesLinkController)\n        .component('slspFeesLinkComponent',{\n            controller: 'slspFeesLinkController',\n            bindings: {afterCtrl: '<'}\n        })","// import {usiFeesLinkModule} from './usi-fees-link/usi-fees-link.module';\nimport {slspFeesLinkModule} from './slsp-fees-link/slsp-fees-link.module';\n\nexport const usiRequestAfterModule = angular\n    .module('usiRequestAfterModule', [])\n        .component('prmRequestAfter',  {\n            bindings: {parentCtrl: '<'},\n            // template: `<usi-fees-link-component after-ctrl=\"$ctrl\"></usi-fees-link-component>`\n            template: `<slsp-fees-link-component after-ctrl=\"$ctrl\"></slsp-fees-link-component>`\n        });\n\nusiRequestAfterModule.requires.push(slspFeesLinkModule.name);\n","export class usiIllSigninOrderLoggedOutController {\n\n    constructor(usiIllSigninOrderLoggedOutService, $scope) {\n        this.usiIllSigninOrderLoggedOutService = usiIllSigninOrderLoggedOutService;\n        this.$scope = $scope;\n    }\n\n    $doCheck() {\n        try{\n            // this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.$scope.usrNme = this.usiIllSigninOrderLoggedOutService.isGuest();\n\n            if (this.$scope.usrNme == true) {\n                let myEl = angular.element(document.querySelector('primo-explore'));\n                return myEl.addClass('logged-out')\n            }\n        \n            else {\n                let myEl = angular.element(document.querySelector('primo-explore'));\n                return myEl.removeClass('logged-out');\n            }\n        }\n        catch(e){\n            console.error(\"***SLSP*** an error occured: usiIllSigninOrderLoggedOutController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nusiIllSigninOrderLoggedOutController.$inject = ['usiIllSigninOrderLoggedOutService', '$scope'];","import {usiIllSigninOrderLoggedOutController} from './usi-ill-signin-order-logged-out.controller';\nimport {usiIllSigninOrderLoggedOutService} from './usi-ill-signin-order-logged-out.service';\n\nexport const usiIllSigninOrderLoggedOutModule = angular\n    .module('usiIllSigninOrderLoggedOutModule', [])\n        .factory('usiIllSigninOrderLoggedOutService', usiIllSigninOrderLoggedOutService)\n        .controller('usiIllSigninOrderLoggedOutController', usiIllSigninOrderLoggedOutController)\n        .component('usiIllSigninOrderLoggedOutComponent',  {\n            bindings: {afterCtrl: '<'},\n            controller: 'usiIllSigninOrderLoggedOutController',\n\n        })\n    ","\n\n    export const usiIllSigninOrderLoggedOutService = ['jwtHelper', function( jwtHelper ){\n\n        function getDecodedToken(){\n            try{\n                if (!sessionStorage){\n                    console.error(\"***SLSP*** no session storage\")\n                    return null;\n                }\n                \n                let jwt = sessionStorage.getItem('primoExploreJwt');\n                \n                if (!jwt){\n                    return null;\n                }\n                return jwtHelper.decodeToken(jwt);\n            }\n            catch(e){\n                console.error(\"**SLSP*** an error occured: userService.getDecodedToken:\");\n                console.error(e.message);\n            }\n        }\n  \n        function isGuest(){\n            try{\n                let decodedToken = getDecodedToken();\n                if (!decodedToken) {\n                    return null;\n                }\n                let userName= decodedToken.userGroup !== 'GUEST'? decodedToken.userName : '';\n                if (userName){\n                    return false;\n                }\n                else{\n                    return true;\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: userService.isGuest:\");\n                console.error(e.message);\n            }\n        }\n    \n        return {\n            isGuest: isGuest,\n            getDecodedToken: getDecodedToken\n        };\n    }]\n    ","export class usiLangSwitchController {\n\n    constructor($element, $window) {\n        console.log(\"***USI*** usiLangSwitchControler constructor\");\n        this.$parent = $element.parent().parent()[0];\n        this.parentCtrl = this.afterCtrl.parentCtrl;\n        this.$window = $window;\n    }\n\n    $onInit() {\n        try {\n            this.languages = [\"it\",\"en\",\"de\",\"fr\"];\n            if (!this.languages.includes(this.parentCtrl.lang)) {\n                this.changeLanguage(\"en\");\n            }\n        }\n        catch (e) {\n            console.error(\"***USI*** usiLangSwitchControler $onInit\");\n            console.error(e.message);\n        }\n    };\n\n    changeLanguage(lang) {\n        this.parentCtrl.changeLangService.addLangParamToUrl(lang);\n        let t = this.parentCtrl;\n        this.parentCtrl.i18nService.setLanguage(lang).then(function(){\n            t.$timeout(function(){return t.$state.go(t.$state.current,{lang:lang},{reload:!0})})\n        });\n };\n\n}\nusiLangSwitchController.$inject = ['$element'];","/**\n* @ngdoc module\n* @name usiLangSwitchModule\n*\n* @description\n* - Add LangSwitch to user area\n* @example\n* each view\n*\n*/\nimport {usiLangSwitchController} from './usi-lang-switch.controller';\n\nexport const usiLangSwitchModule = angular\n    .module('usiLangSwitchModule', [])\n        .controller('usiLangSwitchController', usiLangSwitchController)\n        .component('usiLangSwitchComponent',  {\n            bindings: {afterCtrl: '<'},\n            controller: 'usiLangSwitchController',\n//            template: '<button class=\"md-button md-lang-button\" ng-repeat=\"(lang, url) in $ctrl.languages\" ng-class=\"{active: $ctrl.afterCtrl.parentCtrl.lang == lang}\"><a href=\"{{url}}\">{{lang}}</a></button>'\n            template: '<button class=\"md-button md-lang-button\" ng-repeat=\"lang in $ctrl.languages\" ng-class=\"{active: $ctrl.afterCtrl.parentCtrl.lang == lang}\" ng-click=\"$ctrl.changeLanguage(lang)\">{{lang}}</button>'\n        })\n","import {usiLangSwitchModule} from './usi-lang-switch/usi-lang-switch.module';\nimport {usiIllSigninOrderLoggedOutModule} from './usi-ill-signin-order-logged-out/usi-ill-signin-order-logged-out.module';\n\nexport const usiUserAreaExpandableAfterModule = angular\n    .module('usiUserAreaExpandableAfterModule', [])\n        .component('prmUserAreaExpandableAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-lang-switch-component after-ctrl=\"$ctrl\"></usi-lang-switch-component><usi-ill-signin-order-logged-out-component fter-ctrl=\"$ctrl\"></usi-ill-signin-order-logged-out-component>'\n        });\n\nusiUserAreaExpandableAfterModule.requires.push(usiLangSwitchModule.name);\nusiUserAreaExpandableAfterModule.requires.push(usiIllSigninOrderLoggedOutModule.name);","export const slspHttpInterceptRequests = angular\n    .module('slspHttpInterceptRequests', ['ng'])\n        .config(['$httpProvider', ($httpProvider) => {\n            $httpProvider.interceptors.push(['$q', ($q) => {\n                return {\n                    'request': (request) => {\n                        return request\n                    },\n                    'requestError': (request) => {\n                        return $q.reject(request)\n                    },\n                    'responseError': (response) => {\n                        return $q.reject(response)\n                    },\n                    'response': (response) => {\n                        try {\n                            if (/primaws\\/rest\\/priv\\/myaccount\\/requests/.test(response.config.url)) {\n                                if (response.status == 200 && response.data.status == \"ok\") {\n                                    let interfaceLanguage = angular.element(document.querySelector('primo-explore')).injector().get('$rootScope').$$childHead.$ctrl.userSessionManagerService.getUserLanguage() ||\n                                        window.appConfig['primo-view']['attributes-map'].interfaceLanguage\n\n                                    let list_of_hold_states = {\n                                        'en': [\"in transit\", \"in process\", \"on hold shelf\"],\n                                        'de': [\"transfer\", \"in bearbeitung\", \"bereitgestellt\"],\n                                        'fr': [\"en cours de transfert\", \"en cours\", \"sur le rayon des réservations\"],\n                                        'it': [\"in transito\", \"in processo\", \"scaffale prenotazioni\"]\n                                    }\n                                    let list_of_photocopy_states = {\n                                        'en': [\"in transit\", \"in process\"],\n                                        'de': [\"transfer\", \"in bearbeitung\"],\n                                        'fr': [\"en cours de transfert\", \"en cours\"],\n                                        'it': [\"in transito\", \"in processo\"]\n                                    }\n                                    if (Object.keys(list_of_hold_states).includes(interfaceLanguage)) {\n                                        let list_of_hold_states_regexp = RegExp(list_of_hold_states[interfaceLanguage].map(m => m.toLowerCase()).join('|'))\n                                        // rewrite cancellable holds\n                                        response.data.data.holds.hold.map((m) => {\n                                            if (list_of_hold_states_regexp.test(m.holdstatus.toLowerCase())) {\n                                                m.cancel = 'N'\n                                            }\n                                        })\n                                    }\n                                    else {\n                                        throw `No mapping found for holds: ${interfaceLanguage}`\n                                    }\n\n                                    if (Object.keys(list_of_photocopy_states).includes(interfaceLanguage)) {\n                                        let list_of_photocopy_states_regexp = RegExp(list_of_photocopy_states[interfaceLanguage].map(m => m.toLowerCase()).join('|'))\n                                        // rewrite cancellable photocopies\n                                        response.data.data.photocopies.photocopy.map((m) => {\n                                            if (list_of_photocopy_states_regexp.test(m.requeststatus.toLowerCase())) {\n                                                m.cancel = 'N'\n                                            }\n                                        })\n                                    }\n                                    else {\n                                        throw `No mapping found for photocopies: ${interfaceLanguage}`\n                                    }\n                                }\n                            }\n                        }\n                        catch (error) {\n                            console.error(error);\n                        }\n                        return response;\n                    }\n                }\n            }])\n        }])\n","export const usiConfigService = ['$rootScope','jwtHelper', function($rootScope, jwtHelper){\n\n    function getLanguage(){\n        try{\n            let sms = $rootScope.$$childHead.$ctrl.userSessionManagerService;\n            if (!sms) {\n                console.error(\"***USI*** usiConfigService: userSessionManagerService not available\");\n                return 'fr';\n            }\n            else{\n                return sms.getUserLanguage() || $window.appConfig['primo-view']['attributes-map'].interfaceLanguage;\n            }\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getLanguage():\");\n            console.error(e.message);\n            return 'fr';\n        }\n    }\n\n    function getView() {\n        try{\n            let sms = $rootScope.$$childHead.$ctrl.userSessionManagerService;\n            if (!sms) {\n                console.error(\"***USI*** usiConfigService: userSessionManagerService not available\");\n                return '';\n            }\n            else{\n                return sms.vid;\n            }\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getVid():\");\n            console.error(e.message);\n            return 'fr';\n        }\n    }\n\n    function getParam(param) {\n        try{\n            let sms = $rootScope.$$childHead.$ctrl.userSessionManagerService.$stateParams;\n            if (!sms) {\n                console.error(\"***USI*** usiConfigService: userSessionManagerService not available\");\n                return '';\n            }\n            else{\n                return sms[param];\n            }\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getVid():\");\n            console.error(e.message);\n            return 'fr';\n        }\n    }\n\n    function getLabel(config, key) {\n        try{\n            let lang = getLanguage();\n            if (!config[key]) {\n                console.error(\"***USI*** usiConfigService.getLabel: '\" + key + \"' not in config\");\n                return key;\n            }\n            if(config[key][lang]){\n                return config[key][lang];\n            }\n            else{\n                return config[key]['fr'];\n            }\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getLabel():\");\n            console.error(e.message);\n            return '';\n        }\n    }\n\n    function getDecodedToken(){\n        try{\n            if (!sessionStorage){\n                console.error(\"***USI*** no session storage\")\n                return null;\n            }\n            let jwt = sessionStorage.getItem('primoExploreJwt');\n            if (!jwt){\n                return null;\n            }\n            return jwtHelper.decodeToken(jwt);\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getDecodedToken:\");\n            console.error(e.message);\n        }\n    }\n\n    function isGuest() {\n        let decodedToken = getDecodedToken();\n        if (!decodedToken) {\n            return null;\n        }\n        let userName = decodedToken.userGroup !== 'GUEST' ? decodedToken.userName : '';\n        if (userName) {\n            return false\n        }\n        else {\n            return true;\n        }\n    }\n\n    function getUsergroup() {\n        let decodedToken = getDecodedToken();\n        if (!decodedToken) {\n            return null;\n        }\n        return decodedToken.userGroup;\n    }\n\n    function onCampus() {\n        try {\n            let decodedToken = getDecodedToken();\n            if (!decodedToken) {\n                return null;\n            }\n            if (decodedToken.onCampus === 'true') {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        catch(e){\n            console.error(\"***BCU*** an error occured:usiConfigService.onCampus:\");\n            console.error(e.message);\n        }\n    }\n\n    \n/*\n    function getUrl(config, key) {\n        try{\n            let lang = this.getLanguage();\n            if (!config.url[key]) {\n                console.error(\"***USI*** usiConfigService.getUrl: '\" + key + \"' not in config\");\n                return '';\n            }\n            if(config.url[key][lang]){\n                return config.url[key][lang];\n            }\n            else{\n                return config.url[key]['fr'];\n            }\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getUrl():\");\n            console.error(e.message);\n            return '';\n        }\n    }\n*/\n    return {\n        getLanguage: getLanguage,\n        getLabel: getLabel,\n        getView: getView,\n        getParam: getParam,\n        getUsergroup: getUsergroup,\n        isGuest: isGuest,\n        getDecodedToken: getDecodedToken,\n        onCampus: onCampus\n//        getUrl: getUrl\n    };\n}]"]}