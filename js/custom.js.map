{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/41SLSP_USI-BiUSI/js/main.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/alma-howovp-after/alma-how-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/alma-howovp-after/usi-howovp/usi-howovp.config.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/alma-howovp-after/usi-howovp/usi-howovp.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/alma-howovp-after/usi-howovp/usi-howovp.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-holdings-after/usi-location-holdings-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-holdings-after/usi-location-open-close/usi-location-open-close.config.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-holdings-after/usi-location-open-close/usi-location-open-close.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-holdings-after/usi-location-open-close/usi-location-open-close.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-item-after/usi-item-red-text/usi-item-red-text.config.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-item-after/usi-item-red-text/usi-item-red-text.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-item-after/usi-item-red-text/usi-item-red-text.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-item-after/usi-location-item-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-items-after/usi-links/usi-links.config.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-items-after/usi-links/usi-links.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-items-after/usi-links/usi-links.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-location-items-after/usi-location-items-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-personal-info-after/usi-edit-personal-details/usi-edit-personal-details.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-personal-info-after/usi-edit-personal-details/usi-edit-personal-details.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-personal-info-after/usi-personal-info-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-request-after/slsp-fees-link/slsp-fees-link.config.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-request-after/slsp-fees-link/slsp-fees-link.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-request-after/slsp-fees-link/slsp-fees-link.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-request-after/usi-request-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-ill-signin-order-logged-out/usi-ill-signin-order-logged-out.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-ill-signin-order-logged-out/usi-ill-signin-order-logged-out.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-ill-signin-order-logged-out/usi-ill-signin-order-logged-out.service.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-lang-switch/usi-lang-switch.controller.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-lang-switch/usi-lang-switch.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/prm-user-area-expandable-after/usi-user-area-expandable-after.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/modules/slsp-http-intercept-requests/slsp-http-intercept-requests.module.js","primo-explore/custom/41SLSP_USI-BiUSI/js/services/usi-config.service.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_usiLocationItemsAfter","_usiLocationHoldingsAfter","_usiLocationItemAfter","_usiPersonalInfoAfter","_usiUserAreaExpandableAfter","_usiRequestAfter","_almaHowAfter","_slspHttpInterceptRequests","app","angular","requires","push","usiLocationItemsAfterModule","name","usiLocationHoldingsAfterModule","usiLocationItemAfterModule","usiPersonalInfoAfterModule","usiUserAreaExpandableAfterModule","usiRequestAfterModule","usiAlmaHowovpAfterModule","slspHttpInterceptRequests","_usiHowovp","component","bindings","parentCtrl","template","usiHowovpModule","usiHowovpConfig","title","de","en","fr","it","ill","msg","usiHowovpController","usiConfigService","_classCallCheck","this","span","howovp","ovpTitle","element","document","querySelector","console","log","createElement","getLabel","innerHTML","replace","replaceWith","className","insertBefore","children","$inject","_usiConfig","_usiHowovp2","factory","controller","afterCtrl","_usiLocationOpenClose","usiLocationOpenCloseModule","usiLocationOpenCloseConfig","open","closed","usiLocationOpenCloseController","$element","config","usilocation","currLoc","isopen","includes","location","subLocationCode","isusi","organization","error","message","_usiLocationOpenClose2","usiItemRedTextConfig","labisalp","cattedre","btm","sequential","sameday","seven","twentyeight","usiItemRedTextController","itempolicyElement","parentElement","innerText","style","color","itemtext","holdinglocation","text","contactlink","loc","getLanguage","_usiItemRedText","_usiItemRedText2","usiItemRedTextModule","usiLinksConfig","mendrisio","lugano","usiLinksController","librarycodeTranslation","libraryCode","today","Date","getTime","from","to","userSessionManagerService","attributesMap","interfaceLanguage","_usiLinks","_usiLinks2","usiLinksModule","usiEditPersonalDetailsController","$scope","lang","sms","$root","$$childHead","$ctrl","getInterfaceLanguage","detailsBaseEdu","detailsBaseReg","exclude","grpA","grpB","undefined","personalInfoService","personalInfo","patron","patronstatus","registration","institution","patronstatuscode","labelA","labelB","_usiEditPersonalDetails","usiEditPersonalDetailsModule","slspFeesLinkConfig","feesTitle","feesInfo","feesLinkText","feesUrl","slspFeesLinkController","form","info","formLength","_slspFeesLink","_slspFeesLink2","slspFeesLinkModule","usiIllSigninOrderLoggedOutController","usiIllSigninOrderLoggedOutService","usrNme","isGuest","removeClass","addClass","_usiIllSigninOrderLoggedOut","_usiIllSigninOrderLoggedOut2","usiIllSigninOrderLoggedOutModule","jwtHelper","getDecodedToken","sessionStorage","jwt","getItem","decodeToken","decodedToken","userGroup","userName","usiLangSwitchController","$window","$parent","parent","languages","changeLanguage","changeLangService","addLangParamToUrl","i18nService","setLanguage","then","$timeout","$state","go","current","reload","_usiLangSwitch","usiLangSwitchModule","$httpProvider","interceptors","$q","request","_request","requestError","reject","responseError","response","_response","test","url","status","data","injector","get","getUserLanguage","window","appConfig","list_of_hold_states","list_of_photocopy_states","Object","keys","list_of_hold_states_regexp","RegExp","map","m","toLowerCase","join","holds","hold","holdstatus","cancel","list_of_photocopy_states_regexp","photocopies","photocopy","requeststatus","$rootScope","key","getView","vid","getParam","param","$stateParams","getUsergroup","onCampus"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import {usiLocationItemsAfterModule} from './modules/prm-location-items-after/usi-location-items-after.module';\nimport {usiLocationHoldingsAfterModule} from './modules/prm-location-holdings-after/usi-location-holdings-after.module';\nimport {usiLocationItemAfterModule} from './modules/prm-location-item-after/usi-location-item-after.module';\nimport {usiPersonalInfoAfterModule} from './modules/prm-personal-info-after/usi-personal-info-after.module';\nimport {usiUserAreaExpandableAfterModule} from './modules/prm-user-area-expandable-after/usi-user-area-expandable-after.module';\nimport {usiRequestAfterModule} from './modules/prm-request-after/usi-request-after.module';\nimport {usiAlmaHowovpAfterModule} from './modules/alma-howovp-after/alma-how-after.module';\nimport {slspHttpInterceptRequests} from './modules/slsp-http-intercept-requests/slsp-http-intercept-requests.module';\n\nlet app = angular.module('viewCustom', ['angularLoad']);\n\napp.requires.push(usiLocationItemsAfterModule.name);\napp.requires.push(usiLocationHoldingsAfterModule.name);\napp.requires.push(usiLocationItemAfterModule.name);\napp.requires.push(usiPersonalInfoAfterModule.name);\napp.requires.push(usiUserAreaExpandableAfterModule.name);\napp.requires.push(usiRequestAfterModule.name);\napp.requires.push(usiAlmaHowovpAfterModule.name);\napp.requires.push(slspHttpInterceptRequests.name);","import {usiHowovpModule} from './usi-howovp/usi-howovp.module';\n\nexport const usiAlmaHowovpAfterModule = angular\n    .module('usiAlmaHowovpAfterModule', [])\n        .component('almaHowovpAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-howovp-component after-ctrl=\"$ctrl\"></usi-howovp-component>'\n        });\n\nusiAlmaHowovpAfterModule.requires.push(usiHowovpModule.name);","export const usiHowovpConfig = function(){\n    return {\n        title: {\n            de: 'Andere Ausleih- und Bestelloptionen',\n            en: 'Other loan and request options',\n            fr: 'Autres options de prêt et de demande',\n            it: 'Altre opzioni di prestito e richiesta'\n        },\n        ill: {\n            de: 'Fernleihe',\n            en: 'Inter Library Loan (ILL)',\n            fr: 'Prêt entre bibliothèques',\n            it: 'Prestito interbibliotecario'\n        },\n        msg: {\n            de: 'Achtung: diese Option nur wählen, wenn kein Exemplar unter \"\" verfügbar ist!',\n            en: 'Attention: use this method only in case no item is available under \"\"',\n            fr: 'Attention: n\\'utilisez cette option que dans le cas où aucun exemplaire n\\'est disponible sous \"\"!',\n            it: 'Attenzione: utilizzate questo metodo solo se non sono disponibili opzioni in \"\"!'\n        }\n    }\n}","export class usiHowovpController {\n    constructor(usiConfigService, usiHowovpConfig) {\n        this.usiConfigService = usiConfigService;\n        this.usiHowovpConfig = usiHowovpConfig;\n    }\n\n    $doCheck() {\n        let ill = angular.element(document.querySelector('alma-howovp md-list-item span[translate]'));\n        console.log(ill);\n        if (ill.length) {\n            let span = document.createElement('div');\n            let title = this.usiConfigService.getLabel(this.usiHowovpConfig, 'ill');\n            //this.afterCtrl.parentCtrl.$translate.instant('mainmenu.label.BlankIll');\n            \n            // span.innerHTML = '<h3>' + this.usiConfigService.getLabel(this.usiHowovpConfig, 'ill') + '</h3>' + this.usiConfigService.getLabel(this.usiHowovpConfig, 'msg').replace('\"\"', '<strong>\"' + this.usiConfigService.getLabel(this.usiHowovpConfig, 'title') +'\"</strong>');\n            span.innerHTML = this.usiConfigService.getLabel(this.usiHowovpConfig, 'msg').replace('\"\"', '<strong>\"' + this.usiConfigService.getLabel(this.usiHowovpConfig, 'title') +'\"</strong>');\n            ill[0].replaceWith(span);\n            let howovp = angular.element(document.querySelector('alma-howovp'));\n            let ovpTitle = document.createElement('h3');\n            ovpTitle.className = 'medium-uppercase-bold ill';\n            ovpTitle.innerHTML = '<br><span>' + title + '</span>';\n            howovp[0].insertBefore(ovpTitle,howovp[0].children[0]);\n        }\n    }\n}\n\nusiHowovpController.$inject = [ 'usiConfigService', 'usiHowovpConfig' ];\n\n","import {usiConfigService} from '../../../services/usi-config.service';\nimport {usiHowovpController} from './usi-howovp.controller';\nimport {usiHowovpConfig} from './usi-howovp.config';\n\nexport const usiHowovpModule = angular\n    .module('usiHowovpModule', [])\n        .factory('usiConfigService', usiConfigService)\n        .factory('usiHowovpConfig', usiHowovpConfig)\n        .controller('usiHowovpController', usiHowovpController)\n        .component('usiHowovpComponent',{\n            bindings: {afterCtrl: '<'},\n            controller: 'usiHowovpController',\n\n        })\n","import {usiLocationOpenCloseModule} from './usi-location-open-close/usi-location-open-close.module';\n\nexport const usiLocationHoldingsAfterModule = angular\n    .module('usiLocationHoldingsAfterModule', [])\n        .component('prmLocationHoldingsAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-location-open-close-component after-ctrl=\"$ctrl\"></usi-location-open-close-component>'\n        });\n\nusiLocationHoldingsAfterModule.requires.push(usiLocationOpenCloseModule.name);","export const usiLocationOpenCloseConfig = function(){\n    return {\n        open: {\n            de: 'Frei zugänglich',\n            en: 'Open stacks',\n            fr: 'Libre accès',\n            it: 'A libero accesso'\n        },\n        closed: {\n            de: 'Geschlossener Standort',\n            en: 'Closed stacks',\n            fr: 'Rayon non accessible',\n            it: 'A scaffale chiuso'\n        }\n    }\n}","export class usiLocationOpenCloseController {\n\n    constructor( usiConfigService, usiLocationOpenCloseConfig, $element ) {\n        console.log(\"***USI*** usiLocationOpenCloseController.constructor\\n\\n\");\n        this.usiConfigService = usiConfigService;\n        this.config = usiLocationOpenCloseConfig;\n        this.usilocation = {};\n    }\n\n    $onInit() {\n        if ( typeof this.afterCtrl.parentCtrl.currLoc === \"undefined\" ) {\n            return;\n        }\n        try {\n            console.log(\"***USI*** usiLocationOpenCloseController.$onInit\\n\\n\");\n            let openLocations = [ '201', '202', '208', '801', '803', '804', '805', '808', '810', '819', '823', '827', '831', '832', '833', '834', '841', '842', '843', '844' ];\n            this.usilocation.isopen = ( openLocations.includes( this.afterCtrl.parentCtrl.currLoc.location.subLocationCode ) ) ? true : false;\n            this.usilocation.isusi = ( this.afterCtrl.parentCtrl.currLoc.location.organization == '41SLSP_USI' ) ? true : false;\n        }\n        catch (e) {\n            console.error(\"***USI*** an error occured: usiLocationOpenCloseController.$onInit\\n\\n\");\n            console.error(e.message);\n            throw(e)\n        }\n    }\n}\n\nusiLocationOpenCloseController.$inject = [ 'usiConfigService', 'usiLocationOpenCloseConfig', '$element' ];","import {usiConfigService} from '../../../services/usi-config.service';\nimport {usiLocationOpenCloseConfig} from './usi-location-open-close.config';\nimport {usiLocationOpenCloseController} from './usi-location-open-close.controller';\nimport {usiLocationOpenCloseHtml} from './usi-location-open-close.html';\n\nexport const usiLocationOpenCloseModule = angular\n    .module('usiLocationOpenCloseModule', [])\n        .factory('usiConfigService', usiConfigService)\n        .factory('usiLocationOpenCloseConfig', usiLocationOpenCloseConfig)\n        .controller('usiLocationOpenCloseController', usiLocationOpenCloseController)\n        .component('usiLocationOpenCloseComponent',{\n            controller: 'usiLocationOpenCloseController',\n            bindings: {afterCtrl: '<'},\n            template: usiLocationOpenCloseHtml\n        })\n\n","export const usiItemRedTextConfig = function(){\n    return {\n        labisalp: {\n            de: 'Benutzung nach Vereinbarung bei LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, Mo-Fr 9-17 Uhr',\n            en: 'Consultation by appointment at LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, Mo-Fr 9am-5pm',\n            fr: 'Consultation sur rendez-vous chez LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, lun-ven 9h-17h',\n            it: 'Consultabile su appuntamento c/o LabiSAlp | labisalp.arc@usi.ch, Villa Argentina, Lu-Ve 09:00-17:00'\n        },\n        cattedre: {\n            de: 'Wenden Sie sich an die jeweilige Abteilung (für Details klicken)',\n            en: 'Address yourself to the specific department (click for details)',\n            fr: 'Adressez-vous au département spécifique (cliquez pour plus de détails)',\n            it: 'Rivolgersi alla cattedra specifica (cliccare per vedere i dettagli)'\n        },\n        btm: {\n            de: 'Zugang nach Vereinbarung, siehe',\n            en: 'Consultation on appointment, see',\n            fr: 'Consultation sur rendez-vous, voir ',\n            it: 'Consultazione su appuntamento, vedi'\n        },\n        sequential: {\n            de: 'Achtung: dieses Buch ist in Zahlenreihenfolge auf dem Regal geordnet (siehe Nummer links)',\n            en: 'Attention: this book is ordered in numerical sequence on the shelf (see number on the left) ',\n            fr: 'Attention : les livres de cette collection sont triés selon l’ordre numérique (voir numéro à gauche)',\n            it: 'Attenzione: i libri di questo fondo sono ordinati a scaffale secondo la sequenza numerica (v. numero a sinistra)'\n        },\n        sameday: {\n            de: 'Benutzung nur in der Bibliothek',\n            en: 'In-library consultation only',\n            fr: 'Consultation uniquement en bibliothèque',\n            it: 'Consultazione solo in biblioteca'\n        },\n        seven: {\n            de: 'Leihfrist 7 Tage',\n            en: '7 days loan',\n            fr: 'Prêt 7 jours',\n            it: 'Prestito 7 giorni'\n        },\n        twentyeight: {\n            de: 'Leihfrist 28 Tage',\n            en: '28 days loan',\n            fr: 'Prêt 28 jours',\n            it: 'Prestito 28 giorni'\n        }\n    }\n}","export class usiItemRedTextController {\n\n    constructor( usiConfigService, usiItemRedTextConfig, $element ) {\n        console.log(\"***USI*** usiItemRedTextController.constructor\\n\\n\");\n        this.usiConfigService = usiConfigService;\n        this.config = usiItemRedTextConfig;\n        this.element = $element[0];\n    }\n\n    $doCheck() {\n        // correct english-only policy names\n        const itempolicyElement = this.element.parentElement.parentElement.children[0].children[0].children[0].children[1];\n\n        if ( typeof itempolicyElement === \"undefined\" ) {\n            return;\n        }\n\n    \tif ( itempolicyElement.innerText == 'Same Day Loan') {\n    \t\titempolicyElement.innerText = this.usiConfigService.getLabel(this.config, 'sameday');\n    \t\titempolicyElement.style.color = \"red\";\n    \t}\n    \tif ( itempolicyElement.innerText == '28 Days Loan') {\n    \t\titempolicyElement.innerText = this.usiConfigService.getLabel(this.config, 'twentyeight');\n    \t}\n    \tif ( itempolicyElement.innerText == '7 Days Loan') {\n    \t\titempolicyElement.innerText = this.usiConfigService.getLabel(this.config, 'seven');\n    \t}\n    \titempolicyElement.style[\"font-size\"] = \"14px\";\n    }\n\n    // $onInit() {\n    getText() {\n        this.itemtext = \"I'm the getText() item text\";\n        this.holdinglocation = {\n            message: false,\n            btm: false,\n            text: \"\",\n            contactlink: \"\"\n        };\n        try {\n            console.log(\"***USI*** usiItemRedText.$onInit\\n\\n\");\n\n            // this.meaa = ( this.afterCtrl.parentCtrl.loc.location.libraryCode == 'MEAA' ) ? true : false;\n            // console.log(this.meaa);\n\n            switch( this.afterCtrl.parentCtrl.loc.location.subLocationCode ) {\n                case '820':\n                \tthis.holdinglocation.message = true;\n                \tthis.holdinglocation.text = this.usiConfigService.getLabel(this.config, 'labisalp');\n                    break;\n\t\t\t\tcase '845':\n                \tthis.holdinglocation.message = true;\n\t                this.holdinglocation.text = this.usiConfigService.getLabel(this.config, 'cattedre');\n\t                break;\n\t\t\t\tcase '809':\n                    this.holdinglocation.message = true;\n                \tthis.holdinglocation.btm = true;\n\t                this.holdinglocation.text = this.usiConfigService.getLabel(this.config, 'btm');\n\t\t\t\t\tthis.holdinglocation.contactlink = ( this.usiConfigService.getLanguage() == 'it' ) ? 'http://www.arc.usi.ch/it/btm' : 'https://www.arc.usi.ch/en/risorse-e-servizi/servizi/biblioteca-tecnica-e-dei-materiali';\n\t                break;\n\t\t\t\tcase '810':\n                \tthis.holdinglocation.message = true;\n\t                this.holdinglocation.text = this.usiConfigService.getLabel(this.config, 'sequential');\n\t                break;\n\t\t\t\tdefault:\n                \tthis.holdinglocation = 'normal';\n            }\n            return this.holdinglocation;\n\n        }\n        catch (e) {\n            console.error(\"***USI*** an error occured: usiItemRedTextController.$onInit\\n\\n\");\n            console.error(e.message);\n            throw(e)\n        }\n    }\n}\n\nusiItemRedTextController.$inject = [ 'usiConfigService', 'usiItemRedTextConfig', '$element' ];","import {usiConfigService} from '../../../services/usi-config.service';\nimport {usiItemRedTextConfig} from './usi-item-red-text.config';\nimport {usiItemRedTextController} from './usi-item-red-text.controller';\nimport {usiItemRedTextHtml} from './usi-item-red-text.html';\n\nexport const usiItemRedTextModule = angular\n    .module('usiItemRedTextModule', [])\n        .factory('usiConfigService', usiConfigService)\n        .factory('usiItemRedTextConfig', usiItemRedTextConfig)\n        .controller('usiItemRedTextController', usiItemRedTextController)\n        .component('usiItemRedTextComponent',{\n            bindings: {afterCtrl: '<'},\n            controller: 'usiItemRedTextController',\n            template: usiItemRedTextHtml\n        })","import {usiItemRedTextModule} from './usi-item-red-text/usi-item-red-text.module';\n\nexport const usiLocationItemAfterModule = angular\n    .module('usiLocationItemAfterModule', [])\n        .component('prmLocationItemAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-item-red-text-component after-ctrl=\"$ctrl\"></usi-item-red-text-component>'\n        });\n\nusiLocationItemAfterModule.requires.push(usiItemRedTextModule.name);","export const usiLinksConfig = function(){\n    return {\n        mendrisio: {\n            de: 'http:\\/\\/biblio.arc.usi.ch\\/en',\n            en: 'http:\\/\\/biblio.arc.usi.ch\\/en',\n            fr: 'http:\\/\\/biblio.arc.usi.ch\\/en',\n            it: 'http:\\/\\/biblio.arc.usi.ch'\n        },\n        lugano: {\n            de: 'https:\\/\\/en.bul.sbu.usi.ch',\n            en: 'https:\\/\\/en.bul.sbu.usi.ch',\n            fr: 'https:\\/\\/en.bul.sbu.usi.ch',\n            it: 'https:\\/\\/it.bul.sbu.usi.ch'\n        }\n    }\n}","export class usiLinksController {\n    constructor(usiConfigService, usiLinksConfig) {\n        this.usiConfigService = usiConfigService;\n        this.usiLinksConfig = usiLinksConfig;\n    }\n\n    $onInit() {\n        try {\n            console.log(\"***USI*** usiLinksController.$onInit\\n\\n\");\n        }\n        catch (e) {\n            console.error(\"***USI*** an error occured: usiLinksController.$onInit\\n\\n\");\n            console.error(e.message);\n            throw(e)\n        }\n    }\n\n    getLibrary() {\n        if ( typeof this.afterCtrl.parentCtrl.currLoc === \"undefined\" ) {\n            return;\n        }\n        return this.afterCtrl.parentCtrl.currLoc.location.librarycodeTranslation;\n    }\n\n    getLink() {\n        if ( typeof this.afterCtrl.parentCtrl.loc === \"undefined\" && typeof this.afterCtrl.parentCtrl.currLoc  === \"undefined\" ) {\n            return;\n        }\n        if (this.afterCtrl.parentCtrl.loc.location.libraryCode == 'MEAA' || this.afterCtrl.parentCtrl.currLoc.location.libraryCode == 'MEAA') {\n            // return 'http:\\/\\/biblio.arc.usi.ch';\n            return this.usiConfigService.getLabel(this.usiLinksConfig, 'mendrisio');\n        }\n        else if (this.afterCtrl.parentCtrl.loc.location.libraryCode == 'LUBUL' || this.afterCtrl.parentCtrl.currLoc.location.libraryCode == 'LUBUL'){\n            return this.usiConfigService.getLabel(this.usiLinksConfig, 'lugano');\n        }\n        else {\n            return `https:\\/\\/registration.slsp.ch\\/libraries\\/\\?library\\=${this.afterCtrl.parentCtrl.loc.location.libraryCode}`;\n        }\n    }\n\n    getStyle() {\n        return '';\n    }\n\n    getMEAAclosureMessage() {\n        // check if today is in given closure range\n        var today = new Date().getTime();\n        // the month is 0-indexed! For example, new Date(1995, 11, 17) resolves to December 17, 1995\n        var from = new Date(2021, 6, 21).getTime();\n        var to = new Date(2021, 7, 8).getTime();\n        var withinRange = today >= from && today <= to;\n        // return closure message, or return false\n        if ( withinRange ) {\n            switch ( this.afterCtrl.parentCtrl.userSessionManagerService.attributesMap.interfaceLanguage ) {\n                case \"it\":\n                return \"Attenzione: servizi sospesi per chiusura estiva dal 26 luglio all’8 agosto\"\n                break;\n                default:\n                return \"Attention: services suspended due to summer closure from 26 July to 8 August\"\n            }\n        }\n        else {\n            return false;\n        }\n    }\n}\n\nusiLinksController.$inject = [ 'usiConfigService', 'usiLinksConfig' ];","import {usiConfigService} from '../../../services/usi-config.service';\nimport {usiLinksController} from './usi-links.controller';\nimport {usiLinksHtml} from './usi-links.html';\nimport {usiLinksConfig} from './usi-links.config';\n\nexport const usiLinksModule = angular\n    .module('usiLinksModule', [])\n        .factory('usiConfigService', usiConfigService)\n        .factory('usiLinksConfig', usiLinksConfig)\n        .controller('usiLinksController', usiLinksController)\n        .component('usiLinksComponent',{\n            bindings: {afterCtrl: '<'},\n            controller: 'usiLinksController',\n            template: usiLinksHtml\n        })\n","import {usiLinksModule} from './usi-links/usi-links.module';\n\nexport const usiLocationItemsAfterModule = angular\n    .module('usiLocationItemsAfterModule', [])\n        .component('prmLocationItemsAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-links-component after-ctrl=\"$ctrl\"></usi-links-component>'\n        });\n\nusiLocationItemsAfterModule.requires.push(usiLinksModule.name);\n","export class usiEditPersonalDetailsController {\n\n    constructor($scope) {\n        let lang = 'en';\n        let sms = $scope.$root.$$childHead.$ctrl.userSessionManagerService;\n        if (sms) {\n            lang = sms.getInterfaceLanguage();\n        }\n\n        this.detailsBaseEdu = \"https:\\/\\/eduid.ch\\/web\\/change-account-data\\/2\\/?lang=\" + lang;\n        this.detailsBaseReg = \"https:\\/\\/registration.slsp.ch\\/library-card\\/?lang=\" + lang;\n        this.exclude = ['STAFF', '11', '12', '13', '14', '15', '16', '91', '92', '99'];\n        this.grpA = ['11', '91', '92'];\n        this.grpB = ['12', '13', '14', '15', '16'];\n    }\n\n    getPatronGrp() {\n        if (this.afterCtrl.parentCtrl.personalInfoService.personalInfo !== undefined) {\n            let patron = this.afterCtrl.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n            if (!this.exclude.includes(patron)) {\n                return true;\n            }\n            else {\n                return false;\n        \t}\n        }\n\t\treturn false;\n    }\n\n    grpLabelA() {\n        if (this.afterCtrl.parentCtrl.personalInfoService.personalInfo !== undefined) {\n            let labelA = this.afterCtrl.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n            if (this.grpA.includes(labelA)) {\n                return true;\n            }\n            else {\n                return false;\n        \t}\n    \t}\n        return false;\n\t}\n\n\n    grpLabelB() {\n        if (this.afterCtrl.parentCtrl.personalInfoService.personalInfo !== undefined) {\n            let labelB = this.afterCtrl.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n            if (this.grpB.includes(labelB)) {\n                return true;\n            }\n            else {\n                return false;\n        \t}\n\t\t}\n        return false;\n    }\n}\n\nusiEditPersonalDetailsController.$inject = [ '$scope' ];","import {usiEditPersonalDetailsController} from './usi-edit-personal-details.controller';\nimport {usiEditPersonalDetailsHtml} from './usi-edit-personal-details.html';\n\nexport const usiEditPersonalDetailsModule = angular\n    .module('usiEditPersonalDetailsModule', [])\n        .controller('usiEditPersonalDetailsController', usiEditPersonalDetailsController)\n        .component('usiEditPersonalDetailsComponent',{\n            bindings: {afterCtrl: '<'},\n            controller: 'usiEditPersonalDetailsController',\n            template: usiEditPersonalDetailsHtml\n        })\n","import {usiEditPersonalDetailsModule} from './usi-edit-personal-details/usi-edit-personal-details.module';\n\nexport const usiPersonalInfoAfterModule = angular\n    .module('usiPersonalInfoAfterModule', [])\n        .component('prmPersonalInfoAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-edit-personal-details-component after-ctrl=\"$ctrl\"></usi-edit-personal-details-component>'\n        });\n\nusiPersonalInfoAfterModule.requires.push(usiEditPersonalDetailsModule.name);\n","export const slspFeesLinkConfig = function(){\n    return {\n        feesTitle: {\n            de: 'Gebühren',\n            en: 'Fees',\n            fr: 'Frais',\n            it: 'Costi'\n        },\n        feesInfo: {\n            de: 'Die Gebühren der USI-Bibliotheken sind im folgenden Dokument beschrieben:',\n            en: 'USI libraries fees are described in the following document:',\n            fr: 'Les frais des bibliothèques USI sont décrits dans le document suivant:',\n            it: 'Le tariffe praticate dalle Biblioteche dell’USI sono descritte nel seguente documento:'\n        },\n        feesLinkText: {\n            de: 'Gebühren - Fernleihe und SLSP-Kurier',\n            en: 'Fees - Interlibrary loan and SLSP-Courier',\n            fr: 'Frais - Prêt entre bibliothèques et SLSP-Courier',\n            it: 'Tariffe - Prestito interbibliotecario e SLSP-Courier'\n        },\n        feesUrl: {\n            de: 'https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=de',\n            en: 'https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=en',\n            fr: 'https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=fr',\n            it: 'https://reperio.usi.ch/discovery/static-file/costs?vid=41SLSP_USI:BiUSI&lang=it'\n        },\n    }\n}\n","export class slspFeesLinkController {\n\n\tconstructor(usiConfigService, slspFeesLinkConfig, $element) {\n        this.usiConfigService = usiConfigService;\n        this.config = slspFeesLinkConfig;\n\t\tthis.$element = $element[0];\n        this.form = this.$element.parentElement.parentElement;\n\t}\n\n\t$doCheck() {\n\t\tlet form = false;\n\t\tlet formLength = 2;\n\n\t\tif (this.form.children[0].children[1] !== undefined && this.form.children[0].children[1].children[0] !== undefined) {\n\t\t\tform = this.form.children[0].children[1].children[0];\n\t\t}\n\t\telse if (this.form.children[0].children[0] !== undefined && this.form.children[0].children[0].children[0] !== undefined) {\n\t\t\tform = this.form.children[0].children[0].children[0];\n\t\t\tformLength = 3;\n\t\t}\n\n\t\t//create and insert fees info block if not present\n\t\tif (form && form.children.length == formLength) {\n\t\t\tlet info = document.createElement('DIV');\n\t\t\tinfo.className = \"courier-info bar alert-bar\";\n\t\t\tinfo.innerHTML =\n\t\t\t\t`<h4>${this.usiConfigService.getLabel(this.config, 'feesTitle')}</h4>\n\t\t\t\t<p>${this.usiConfigService.getLabel(this.config, 'feesInfo')}</p>\n\t\t\t\t<p><a href=\"${this.usiConfigService.getLabel(this.config, 'feesUrl')}\"\n\t\t\t\ttarget=\"_blank\">${this.usiConfigService.getLabel(this.config, 'feesLinkText')}</a></p>`;\n\t\t\tform.insertBefore(info, form.children[formLength - 1]);\n\t\t}\n\t}\n}\n\nslspFeesLinkController.$inject = [ 'usiConfigService', 'slspFeesLinkConfig', '$element' ];","import {slspFeesLinkController} from './slsp-fees-link.controller';\nimport {usiConfigService} from '../../../services/usi-config.service';\nimport {slspFeesLinkConfig} from './slsp-fees-link.config';\n\nexport const slspFeesLinkModule = angular\n    .module('slspFeesLinkModule', [])\n        .factory('usiConfigService', usiConfigService)\n        .factory('slspFeesLinkConfig', slspFeesLinkConfig)\n        .controller('slspFeesLinkController', slspFeesLinkController)\n        .component('slspFeesLinkComponent',{\n            controller: 'slspFeesLinkController',\n            bindings: {afterCtrl: '<'}\n        })","// import {usiFeesLinkModule} from './usi-fees-link/usi-fees-link.module';\nimport {slspFeesLinkModule} from './slsp-fees-link/slsp-fees-link.module';\n\nexport const usiRequestAfterModule = angular\n    .module('usiRequestAfterModule', [])\n        .component('prmRequestAfter',  {\n            bindings: {parentCtrl: '<'},\n            // template: `<usi-fees-link-component after-ctrl=\"$ctrl\"></usi-fees-link-component>`\n            template: `<slsp-fees-link-component after-ctrl=\"$ctrl\"></slsp-fees-link-component>`\n        });\n\nusiRequestAfterModule.requires.push(slspFeesLinkModule.name);\n","export class usiIllSigninOrderLoggedOutController {\n\n    constructor(usiIllSigninOrderLoggedOutService, $scope) {\n        this.usiIllSigninOrderLoggedOutService = usiIllSigninOrderLoggedOutService;\n        this.$scope = $scope;\n    }\n\n    $doCheck() {\n        try{\n            // this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.$scope.usrNme = this.usiIllSigninOrderLoggedOutService.isGuest();\n\n            if (this.$scope.usrNme == true) {\n                let myEl = angular.element(document.querySelector('primo-explore'));\n                return myEl.addClass('logged-out')\n            }\n        \n            else {\n                let myEl = angular.element(document.querySelector('primo-explore'));\n                return myEl.removeClass('logged-out');\n            }\n        }\n        catch(e){\n            console.error(\"***SLSP*** an error occured: usiIllSigninOrderLoggedOutController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nusiIllSigninOrderLoggedOutController.$inject = ['usiIllSigninOrderLoggedOutService', '$scope'];","import {usiIllSigninOrderLoggedOutController} from './usi-ill-signin-order-logged-out.controller';\nimport {usiIllSigninOrderLoggedOutService} from './usi-ill-signin-order-logged-out.service';\n\nexport const usiIllSigninOrderLoggedOutModule = angular\n    .module('usiIllSigninOrderLoggedOutModule', [])\n        .factory('usiIllSigninOrderLoggedOutService', usiIllSigninOrderLoggedOutService)\n        .controller('usiIllSigninOrderLoggedOutController', usiIllSigninOrderLoggedOutController)\n        .component('usiIllSigninOrderLoggedOutComponent',  {\n            bindings: {afterCtrl: '<'},\n            controller: 'usiIllSigninOrderLoggedOutController',\n\n        })\n    ","\n\n    export const usiIllSigninOrderLoggedOutService = ['jwtHelper', function( jwtHelper ){\n\n        function getDecodedToken(){\n            try{\n                if (!sessionStorage){\n                    console.error(\"***SLSP*** no session storage\")\n                    return null;\n                }\n                \n                let jwt = sessionStorage.getItem('primoExploreJwt');\n                \n                if (!jwt){\n                    return null;\n                }\n                return jwtHelper.decodeToken(jwt);\n            }\n            catch(e){\n                console.error(\"**SLSP*** an error occured: userService.getDecodedToken:\");\n                console.error(e.message);\n            }\n        }\n  \n        function isGuest(){\n            try{\n                let decodedToken = getDecodedToken();\n                if (!decodedToken) {\n                    return null;\n                }\n                let userName= decodedToken.userGroup !== 'GUEST'? decodedToken.userName : '';\n                if (userName){\n                    return false;\n                }\n                else{\n                    return true;\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: userService.isGuest:\");\n                console.error(e.message);\n            }\n        }\n    \n        return {\n            isGuest: isGuest,\n            getDecodedToken: getDecodedToken\n        };\n    }]\n    ","export class usiLangSwitchController {\n\n    constructor($element, $window) {\n        console.log(\"***USI*** usiLangSwitchControler constructor\");\n        this.$parent = $element.parent().parent()[0];\n        this.parentCtrl = this.afterCtrl.parentCtrl;\n        this.$window = $window;\n    }\n\n    $onInit() {\n        try {\n            this.languages = [\"it\",\"en\",\"de\",\"fr\"];\n            if (!this.languages.includes(this.parentCtrl.lang)) {\n                this.changeLanguage(\"en\");\n            }\n        }\n        catch (e) {\n            console.error(\"***USI*** usiLangSwitchControler $onInit\");\n            console.error(e.message);\n        }\n    };\n\n    changeLanguage(lang) {\n        this.parentCtrl.changeLangService.addLangParamToUrl(lang);\n        let t = this.parentCtrl;\n        this.parentCtrl.i18nService.setLanguage(lang).then(function(){\n            t.$timeout(function(){return t.$state.go(t.$state.current,{lang:lang},{reload:!0})})\n        });\n };\n\n}\nusiLangSwitchController.$inject = ['$element'];","/**\n* @ngdoc module\n* @name usiLangSwitchModule\n*\n* @description\n* - Add LangSwitch to user area\n* @example\n* each view\n*\n*/\nimport {usiLangSwitchController} from './usi-lang-switch.controller';\n\nexport const usiLangSwitchModule = angular\n    .module('usiLangSwitchModule', [])\n        .controller('usiLangSwitchController', usiLangSwitchController)\n        .component('usiLangSwitchComponent',  {\n            bindings: {afterCtrl: '<'},\n            controller: 'usiLangSwitchController',\n//            template: '<button class=\"md-button md-lang-button\" ng-repeat=\"(lang, url) in $ctrl.languages\" ng-class=\"{active: $ctrl.afterCtrl.parentCtrl.lang == lang}\"><a href=\"{{url}}\">{{lang}}</a></button>'\n            template: '<button class=\"md-button md-lang-button\" ng-repeat=\"lang in $ctrl.languages\" ng-class=\"{active: $ctrl.afterCtrl.parentCtrl.lang == lang}\" ng-click=\"$ctrl.changeLanguage(lang)\">{{lang}}</button>'\n        })\n","import {usiLangSwitchModule} from './usi-lang-switch/usi-lang-switch.module';\nimport {usiIllSigninOrderLoggedOutModule} from './usi-ill-signin-order-logged-out/usi-ill-signin-order-logged-out.module';\n\nexport const usiUserAreaExpandableAfterModule = angular\n    .module('usiUserAreaExpandableAfterModule', [])\n        .component('prmUserAreaExpandableAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: '<usi-lang-switch-component after-ctrl=\"$ctrl\"></usi-lang-switch-component><usi-ill-signin-order-logged-out-component fter-ctrl=\"$ctrl\"></usi-ill-signin-order-logged-out-component>'\n        });\n\nusiUserAreaExpandableAfterModule.requires.push(usiLangSwitchModule.name);\nusiUserAreaExpandableAfterModule.requires.push(usiIllSigninOrderLoggedOutModule.name);","export const slspHttpInterceptRequests = angular\n    .module('slspHttpInterceptRequests', ['ng'])\n        .config(['$httpProvider', ($httpProvider) => {\n            $httpProvider.interceptors.push(['$q', ($q) => {\n                return {\n                    'request': (request) => {\n                        return request\n                    },\n                    'requestError': (request) => {\n                        return $q.reject(request)\n                    },\n                    'responseError': (response) => {\n                        return $q.reject(response)\n                    },\n                    'response': (response) => {\n                        try {\n                            if (/primaws\\/rest\\/priv\\/myaccount\\/requests/.test(response.config.url)) {\n                                if (response.status == 200 && response.data.status == \"ok\") {\n                                    let interfaceLanguage = angular.element(document.querySelector('primo-explore')).injector().get('$rootScope').$$childHead.$ctrl.userSessionManagerService.getUserLanguage() ||\n                                        window.appConfig['primo-view']['attributes-map'].interfaceLanguage\n\n                                    let list_of_hold_states = {\n                                        'en': [\"in transit\", \"in process\", \"on hold shelf\"],\n                                        'de': [\"transfer\", \"in bearbeitung\", \"bereitgestellt\"],\n                                        'fr': [\"en cours de transfert\", \"en cours\", \"sur le rayon des réservations\"],\n                                        'it': [\"in transito\", \"in processo\", \"scaffale prenotazioni\"]\n                                    }\n                                    let list_of_photocopy_states = {\n                                        'en': [\"in transit\", \"in process\"],\n                                        'de': [\"transfer\", \"in bearbeitung\"],\n                                        'fr': [\"en cours de transfert\", \"en cours\"],\n                                        'it': [\"in transito\", \"in processo\"]\n                                    }\n                                    if (Object.keys(list_of_hold_states).includes(interfaceLanguage)) {\n                                        let list_of_hold_states_regexp = RegExp(list_of_hold_states[interfaceLanguage].map(m => m.toLowerCase()).join('|'))\n                                        // rewrite cancellable holds\n                                        response.data.data.holds.hold.map((m) => {\n                                            if (list_of_hold_states_regexp.test(m.holdstatus.toLowerCase())) {\n                                                m.cancel = 'N'\n                                            }\n                                        })\n                                    }\n                                    else {\n                                        throw `No mapping found for holds: ${interfaceLanguage}`\n                                    }\n\n                                    if (Object.keys(list_of_photocopy_states).includes(interfaceLanguage)) {\n                                        let list_of_photocopy_states_regexp = RegExp(list_of_photocopy_states[interfaceLanguage].map(m => m.toLowerCase()).join('|'))\n                                        // rewrite cancellable photocopies\n                                        response.data.data.photocopies.photocopy.map((m) => {\n                                            if (list_of_photocopy_states_regexp.test(m.requeststatus.toLowerCase())) {\n                                                m.cancel = 'N'\n                                            }\n                                        })\n                                    }\n                                    else {\n                                        throw `No mapping found for photocopies: ${interfaceLanguage}`\n                                    }\n                                }\n                            }\n                        }\n                        catch (error) {\n                            console.error(error);\n                        }\n                        return response;\n                    }\n                }\n            }])\n        }])\n","export const usiConfigService = ['$rootScope','jwtHelper', function($rootScope, jwtHelper){\n\n    function getLanguage(){\n        try{\n            let sms = $rootScope.$$childHead.$ctrl.userSessionManagerService;\n            if (!sms) {\n                console.error(\"***USI*** usiConfigService: userSessionManagerService not available\");\n                return 'fr';\n            }\n            else{\n                return sms.getUserLanguage() || $window.appConfig['primo-view']['attributes-map'].interfaceLanguage;\n            }\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getLanguage():\");\n            console.error(e.message);\n            return 'fr';\n        }\n    }\n\n    function getView() {\n        try{\n            let sms = $rootScope.$$childHead.$ctrl.userSessionManagerService;\n            if (!sms) {\n                console.error(\"***USI*** usiConfigService: userSessionManagerService not available\");\n                return '';\n            }\n            else{\n                return sms.vid;\n            }\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getVid():\");\n            console.error(e.message);\n            return 'fr';\n        }\n    }\n\n    function getParam(param) {\n        try{\n            let sms = $rootScope.$$childHead.$ctrl.userSessionManagerService.$stateParams;\n            if (!sms) {\n                console.error(\"***USI*** usiConfigService: userSessionManagerService not available\");\n                return '';\n            }\n            else{\n                return sms[param];\n            }\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getVid():\");\n            console.error(e.message);\n            return 'fr';\n        }\n    }\n\n    function getLabel(config, key) {\n        try{\n            let lang = getLanguage();\n            if (!config[key]) {\n                console.error(\"***USI*** usiConfigService.getLabel: '\" + key + \"' not in config\");\n                return key;\n            }\n            if(config[key][lang]){\n                return config[key][lang];\n            }\n            else{\n                return config[key]['fr'];\n            }\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getLabel():\");\n            console.error(e.message);\n            return '';\n        }\n    }\n\n    function getDecodedToken(){\n        try{\n            if (!sessionStorage){\n                console.error(\"***USI*** no session storage\")\n                return null;\n            }\n            let jwt = sessionStorage.getItem('primoExploreJwt');\n            if (!jwt){\n                return null;\n            }\n            return jwtHelper.decodeToken(jwt);\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getDecodedToken:\");\n            console.error(e.message);\n        }\n    }\n\n    function isGuest() {\n        let decodedToken = getDecodedToken();\n        if (!decodedToken) {\n            return null;\n        }\n        let userName = decodedToken.userGroup !== 'GUEST' ? decodedToken.userName : '';\n        if (userName) {\n            return false\n        }\n        else {\n            return true;\n        }\n    }\n\n    function getUsergroup() {\n        let decodedToken = getDecodedToken();\n        if (!decodedToken) {\n            return null;\n        }\n        return decodedToken.userGroup;\n    }\n\n    function onCampus() {\n        try {\n            let decodedToken = getDecodedToken();\n            if (!decodedToken) {\n                return null;\n            }\n            if (decodedToken.onCampus === 'true') {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        catch(e){\n            console.error(\"***BCU*** an error occured:usiConfigService.onCampus:\");\n            console.error(e.message);\n        }\n    }\n\n    \n/*\n    function getUrl(config, key) {\n        try{\n            let lang = this.getLanguage();\n            if (!config.url[key]) {\n                console.error(\"***USI*** usiConfigService.getUrl: '\" + key + \"' not in config\");\n                return '';\n            }\n            if(config.url[key][lang]){\n                return config.url[key][lang];\n            }\n            else{\n                return config.url[key]['fr'];\n            }\n        }\n        catch(e){\n            console.error(\"***USI*** an error occured: usiConfigService.getUrl():\");\n            console.error(e.message);\n            return '';\n        }\n    }\n*/\n    return {\n        getLanguage: getLanguage,\n        getLabel: getLabel,\n        getView: getView,\n        getParam: getParam,\n        getUsergroup: getUsergroup,\n        isGuest: isGuest,\n        getDecodedToken: getDecodedToken,\n        onCampus: onCampus\n//        getUrl: getUrl\n    };\n}]"]}